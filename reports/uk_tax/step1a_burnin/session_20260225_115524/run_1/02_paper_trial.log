2026-02-25 11:55:33,575 [INFO] src.cli.runtime: [OK] Broker provider is IBKR
2026-02-25 11:55:33,577 [INFO] src.cli.runtime: [OK] Market timezone is Europe/London
2026-02-25 11:55:33,578 [INFO] src.cli.runtime: [OK] Base currency is GBP
2026-02-25 11:55:33,579 [INFO] src.cli.runtime: [OK] Detected UK symbols: HSBA.L, VOD.L, BP.L, BARC.L, SHEL.L
2026-02-25 11:55:33,579 [INFO] src.cli.runtime: [OK] DB isolation paths set (paper=trading_paper.db, live=trading_live.db, test=trading_test.db)
2026-02-25 11:55:33,615 [INFO] ib_insync.client: Connecting to 127.0.0.1:7497 with clientId 73...
2026-02-25 11:55:33,616 [INFO] ib_insync.client: Connected
2026-02-25 11:55:33,619 [INFO] ib_insync.client: Logged on to server version 176
2026-02-25 11:55:33,620 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:hfarm
2026-02-25 11:55:33,620 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:eufarmnj
2026-02-25 11:55:33,620 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:cashfarm
2026-02-25 11:55:33,620 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:usfuture
2026-02-25 11:55:33,621 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:jfarm
2026-02-25 11:55:33,621 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:usfarm.nj
2026-02-25 11:55:33,621 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:eufarm
2026-02-25 11:55:33,621 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:usfarm
2026-02-25 11:55:33,621 [INFO] ib_insync.wrapper: Warning 2106, reqId -1: HMDS data farm connection is OK:euhmds
2026-02-25 11:55:33,621 [INFO] ib_insync.wrapper: Warning 2106, reqId -1: HMDS data farm connection is OK:fundfarm
2026-02-25 11:55:33,622 [INFO] ib_insync.wrapper: Warning 2106, reqId -1: HMDS data farm connection is OK:ushmds
2026-02-25 11:55:33,622 [INFO] ib_insync.wrapper: Warning 2158, reqId -1: Sec-def data farm connection is OK:secdefnj
2026-02-25 11:55:33,622 [INFO] ib_insync.client: API connection ready
2026-02-25 11:55:33,623 [INFO] ib_insync.wrapper: position: Position(account='DUQ117408', contract=Stock(conId=909083, symbol='HSBA', exchange='LSE', currency='GBP', localSymbol='HSBA', tradingClass='SET1'), position=10.0, avgCost=13.81023)
2026-02-25 11:55:33,623 [INFO] ib_insync.wrapper: position: Position(account='DUQ117408', contract=Stock(conId=908940, symbol='BARC', exchange='LSE', currency='GBP', localSymbol='BARC', tradingClass='SET1'), position=446.0, avgCost=4.7171027)
2026-02-25 11:55:33,623 [INFO] ib_insync.wrapper: position: Position(account='DUQ117408', contract=Stock(conId=140148322, symbol='VOD', exchange='LSE', currency='GBP', localSymbol='VOD', tradingClass='SET1'), position=690.0, avgCost=1.1878884)
2026-02-25 11:55:33,725 [INFO] ib_insync.wrapper: updatePortfolio: PortfolioItem(contract=Stock(conId=908940, symbol='BARC', right='0', primaryExchange='LSE', currency='GBP', localSymbol='BARC', tradingClass='SET1'), position=446.0, marketPrice=4.6494999, marketValue=2073.68, averageCost=4.7171027, unrealizedPNL=-30.15, realizedPNL=0.0, account='DUQ117408')
2026-02-25 11:55:33,726 [INFO] ib_insync.wrapper: updatePortfolio: PortfolioItem(contract=Stock(conId=909083, symbol='HSBA', right='0', primaryExchange='LSE', currency='GBP', localSymbol='HSBA', tradingClass='SET1'), position=10.0, marketPrice=13.65320015, marketValue=136.53, averageCost=13.81023, unrealizedPNL=-1.57, realizedPNL=0.0, account='DUQ117408')
2026-02-25 11:55:33,726 [INFO] ib_insync.wrapper: updatePortfolio: PortfolioItem(contract=Stock(conId=140148322, symbol='VOD', right='0', primaryExchange='LSE', currency='GBP', localSymbol='VOD', tradingClass='SET1'), position=690.0, marketPrice=1.173, marketValue=809.37, averageCost=1.1878884, unrealizedPNL=-10.27, realizedPNL=0.0, account='DUQ117408')
2026-02-25 11:55:33,731 [INFO] ib_insync.wrapper: execDetails Execution(execId='0001b266.699e85ee.01.01', time=datetime.datetime(2026, 2, 25, 11, 0, 44, tzinfo=datetime.timezone.utc), acctNumber='DUQ117408', exchange='BATEUK', side='BOT', shares=119.0, price=466.25, permId=59685724, clientId=1, orderId=54, liquidation=0, cumQty=119.0, avgPrice=466.25, orderRef='', evRule='', evMultiplier=0.0, modelCode='', lastLiquidity=2)
2026-02-25 11:55:33,731 [INFO] ib_insync.wrapper: execDetails Execution(execId='0001b266.699e86c6.01.01', time=datetime.datetime(2026, 2, 25, 11, 38, 18, tzinfo=datetime.timezone.utc), acctNumber='DUQ117408', exchange='BATEUK', side='BOT', shares=112.0, price=465.35, permId=59685733, clientId=1, orderId=70, liquidation=0, cumQty=112.0, avgPrice=465.35, orderRef='', evRule='', evMultiplier=0.0, modelCode='', lastLiquidity=2)
2026-02-25 11:55:33,731 [INFO] ib_insync.wrapper: execDetails Execution(execId='0001b266.699e86d3.01.01', time=datetime.datetime(2026, 2, 25, 11, 48, 5, tzinfo=datetime.timezone.utc), acctNumber='DUQ117408', exchange='BATEUK', side='BOT', shares=105.0, price=464.9, permId=59685742, clientId=1, orderId=86, liquidation=0, cumQty=105.0, avgPrice=464.9, orderRef='', evRule='', evMultiplier=0.0, modelCode='', lastLiquidity=2)
2026-02-25 11:55:33,731 [INFO] ib_insync.wrapper: execDetails Execution(execId='0001b266.699e86d4.01.01', time=datetime.datetime(2026, 2, 25, 11, 48, 44, tzinfo=datetime.timezone.utc), acctNumber='DUQ117408', exchange='BATEUK', side='BOT', shares=108.0, price=464.95, permId=59685752, clientId=73, orderId=16, liquidation=0, cumQty=108.0, avgPrice=464.95, orderRef='', evRule='', evMultiplier=0.0, modelCode='', lastLiquidity=2)
2026-02-25 11:55:33,732 [INFO] ib_insync.wrapper: commissionReport: CommissionReport(execId='0001b266.699e85ee.01.01', commission=5.774188, currency='GBP', realizedPNL=0.0, yield_=0.0, yieldRedemptionDate=0)
2026-02-25 11:55:33,732 [INFO] ib_insync.wrapper: commissionReport: CommissionReport(execId='0001b266.699e86c6.01.01', commission=5.60596, currency='GBP', realizedPNL=0.0, yield_=0.0, yieldRedemptionDate=0)
2026-02-25 11:55:33,732 [INFO] ib_insync.wrapper: commissionReport: CommissionReport(execId='0001b266.699e86d3.01.01', commission=5.440725, currency='GBP', realizedPNL=0.0, yield_=0.0, yieldRedemptionDate=0)
2026-02-25 11:55:33,732 [INFO] ib_insync.wrapper: commissionReport: CommissionReport(execId='0001b266.699e86d4.01.01', commission=5.51073, currency='GBP', realizedPNL=0.0, yield_=0.0, yieldRedemptionDate=0)
2026-02-25 11:55:33,732 [INFO] ib_insync.ib: Synchronization complete
2026-02-25 11:55:33,732 [INFO] src.execution.ibkr_broker: Connected to IBKR at 127.0.0.1:7497 (clientId=73)
2026-02-25 11:55:33,733 [INFO] src.cli.runtime: [OK] IBKR connection established
2026-02-25 11:55:33,733 [INFO] src.cli.runtime: [OK] IBKR account detected: DUQ117408 (paper)
2026-02-25 11:55:33,733 [INFO] ib_insync.ib: Disconnecting from 127.0.0.1:7497, 120 B sent in 8 messages, 22.8 kB received in 424 messages, session time 117 ms.
2026-02-25 11:55:33,733 [INFO] ib_insync.client: Disconnecting
2026-02-25 11:55:33,733 [INFO] src.execution.ibkr_broker: Disconnected from IBKR
2026-02-25 11:55:33,734 [INFO] src.cli.runtime: UK health check complete: no blocking errors
2026-02-25 11:55:34,973 [ERROR] yfinance: $HSBA.L: possibly delisted; no price data found  (1m 2026-02-20 -> 2026-02-20)
2026-02-25 11:55:34,973 [WARNING] src.data.feeds: Data provider 'yfinance' failed for HSBA.L: Empty dataset from provider 'yfinance'
2026-02-25 11:55:35,250 [ERROR] yfinance: $VOD.L: possibly delisted; no price data found  (1m 2026-02-20 -> 2026-02-20)
2026-02-25 11:55:35,250 [WARNING] src.data.feeds: Data provider 'yfinance' failed for VOD.L: Empty dataset from provider 'yfinance'
C:\Users\rando\Projects\trading-bot\src\data\market_data_store.py:187: UserWarning: Converting to PeriodArray/Index representation will drop timezone information.
  for month, month_df in df.groupby(df.index.to_period("M")):
2026-02-25 11:55:35,692 [ERROR] yfinance: $BP.L: possibly delisted; no price data found  (1m 2026-02-23 -> 2026-02-23)
2026-02-25 11:55:35,692 [WARNING] src.data.feeds: Data provider 'yfinance' failed for BP.L: Empty dataset from provider 'yfinance'
C:\Users\rando\Projects\trading-bot\src\data\market_data_store.py:187: UserWarning: Converting to PeriodArray/Index representation will drop timezone information.
  for month, month_df in df.groupby(df.index.to_period("M")):
C:\Users\rando\Projects\trading-bot\src\data\market_data_store.py:187: UserWarning: Converting to PeriodArray/Index representation will drop timezone information.
  for month, month_df in df.groupby(df.index.to_period("M")):
C:\Users\rando\Projects\trading-bot\src\data\market_data_store.py:187: UserWarning: Converting to PeriodArray/Index representation will drop timezone information.
  for month, month_df in df.groupby(df.index.to_period("M")):
2026-02-25 11:55:36,680 [ERROR] yfinance: $SHEL.L: possibly delisted; no price data found  (1m 2026-02-20 -> 2026-02-20)
2026-02-25 11:55:36,680 [WARNING] src.data.feeds: Data provider 'yfinance' failed for SHEL.L: Empty dataset from provider 'yfinance'
2026-02-25 11:55:36,681 [INFO] ib_insync.client: Connecting to 127.0.0.1:7497 with clientId 73...
2026-02-25 11:55:36,682 [INFO] ib_insync.client: Connected
2026-02-25 11:55:36,684 [INFO] ib_insync.client: Logged on to server version 176
2026-02-25 11:55:36,685 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:hfarm
2026-02-25 11:55:36,685 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:eufarmnj
2026-02-25 11:55:36,685 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:cashfarm
2026-02-25 11:55:36,686 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:usfuture
2026-02-25 11:55:36,686 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:jfarm
2026-02-25 11:55:36,686 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:usfarm.nj
2026-02-25 11:55:36,686 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:eufarm
2026-02-25 11:55:36,686 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:usfarm
2026-02-25 11:55:36,686 [INFO] ib_insync.wrapper: Warning 2106, reqId -1: HMDS data farm connection is OK:euhmds
2026-02-25 11:55:36,686 [INFO] ib_insync.wrapper: Warning 2106, reqId -1: HMDS data farm connection is OK:fundfarm
2026-02-25 11:55:36,687 [INFO] ib_insync.wrapper: Warning 2106, reqId -1: HMDS data farm connection is OK:ushmds
2026-02-25 11:55:36,687 [INFO] ib_insync.wrapper: Warning 2158, reqId -1: Sec-def data farm connection is OK:secdefnj
2026-02-25 11:55:36,687 [INFO] ib_insync.client: API connection ready
2026-02-25 11:55:36,688 [INFO] ib_insync.wrapper: position: Position(account='DUQ117408', contract=Stock(conId=909083, symbol='HSBA', exchange='LSE', currency='GBP', localSymbol='HSBA', tradingClass='SET1'), position=10.0, avgCost=13.81023)
2026-02-25 11:55:36,688 [INFO] ib_insync.wrapper: position: Position(account='DUQ117408', contract=Stock(conId=908940, symbol='BARC', exchange='LSE', currency='GBP', localSymbol='BARC', tradingClass='SET1'), position=446.0, avgCost=4.7171027)
2026-02-25 11:55:36,689 [INFO] ib_insync.wrapper: position: Position(account='DUQ117408', contract=Stock(conId=140148322, symbol='VOD', exchange='LSE', currency='GBP', localSymbol='VOD', tradingClass='SET1'), position=690.0, avgCost=1.1878884)
2026-02-25 11:55:36,790 [INFO] ib_insync.wrapper: updatePortfolio: PortfolioItem(contract=Stock(conId=908940, symbol='BARC', right='0', primaryExchange='LSE', currency='GBP', localSymbol='BARC', tradingClass='SET1'), position=446.0, marketPrice=4.6494999, marketValue=2073.68, averageCost=4.7171027, unrealizedPNL=-30.15, realizedPNL=0.0, account='DUQ117408')
2026-02-25 11:55:36,791 [INFO] ib_insync.wrapper: updatePortfolio: PortfolioItem(contract=Stock(conId=909083, symbol='HSBA', right='0', primaryExchange='LSE', currency='GBP', localSymbol='HSBA', tradingClass='SET1'), position=10.0, marketPrice=13.65320015, marketValue=136.53, averageCost=13.81023, unrealizedPNL=-1.57, realizedPNL=0.0, account='DUQ117408')
2026-02-25 11:55:36,791 [INFO] ib_insync.wrapper: updatePortfolio: PortfolioItem(contract=Stock(conId=140148322, symbol='VOD', right='0', primaryExchange='LSE', currency='GBP', localSymbol='VOD', tradingClass='SET1'), position=690.0, marketPrice=1.173, marketValue=809.37, averageCost=1.1878884, unrealizedPNL=-10.27, realizedPNL=0.0, account='DUQ117408')
2026-02-25 11:55:36,794 [INFO] ib_insync.wrapper: execDetails Execution(execId='0001b266.699e85ee.01.01', time=datetime.datetime(2026, 2, 25, 11, 0, 44, tzinfo=datetime.timezone.utc), acctNumber='DUQ117408', exchange='BATEUK', side='BOT', shares=119.0, price=466.25, permId=59685724, clientId=1, orderId=54, liquidation=0, cumQty=119.0, avgPrice=466.25, orderRef='', evRule='', evMultiplier=0.0, modelCode='', lastLiquidity=2)
2026-02-25 11:55:36,794 [INFO] ib_insync.wrapper: execDetails Execution(execId='0001b266.699e86c6.01.01', time=datetime.datetime(2026, 2, 25, 11, 38, 18, tzinfo=datetime.timezone.utc), acctNumber='DUQ117408', exchange='BATEUK', side='BOT', shares=112.0, price=465.35, permId=59685733, clientId=1, orderId=70, liquidation=0, cumQty=112.0, avgPrice=465.35, orderRef='', evRule='', evMultiplier=0.0, modelCode='', lastLiquidity=2)
2026-02-25 11:55:36,794 [INFO] ib_insync.wrapper: execDetails Execution(execId='0001b266.699e86d3.01.01', time=datetime.datetime(2026, 2, 25, 11, 48, 5, tzinfo=datetime.timezone.utc), acctNumber='DUQ117408', exchange='BATEUK', side='BOT', shares=105.0, price=464.9, permId=59685742, clientId=1, orderId=86, liquidation=0, cumQty=105.0, avgPrice=464.9, orderRef='', evRule='', evMultiplier=0.0, modelCode='', lastLiquidity=2)
2026-02-25 11:55:36,794 [INFO] ib_insync.wrapper: execDetails Execution(execId='0001b266.699e86d4.01.01', time=datetime.datetime(2026, 2, 25, 11, 48, 44, tzinfo=datetime.timezone.utc), acctNumber='DUQ117408', exchange='BATEUK', side='BOT', shares=108.0, price=464.95, permId=59685752, clientId=73, orderId=16, liquidation=0, cumQty=108.0, avgPrice=464.95, orderRef='', evRule='', evMultiplier=0.0, modelCode='', lastLiquidity=2)
2026-02-25 11:55:36,795 [INFO] ib_insync.wrapper: commissionReport: CommissionReport(execId='0001b266.699e85ee.01.01', commission=5.774188, currency='GBP', realizedPNL=0.0, yield_=0.0, yieldRedemptionDate=0)
2026-02-25 11:55:36,795 [INFO] ib_insync.wrapper: commissionReport: CommissionReport(execId='0001b266.699e86c6.01.01', commission=5.60596, currency='GBP', realizedPNL=0.0, yield_=0.0, yieldRedemptionDate=0)
2026-02-25 11:55:36,795 [INFO] ib_insync.wrapper: commissionReport: CommissionReport(execId='0001b266.699e86d3.01.01', commission=5.440725, currency='GBP', realizedPNL=0.0, yield_=0.0, yieldRedemptionDate=0)
2026-02-25 11:55:36,795 [INFO] ib_insync.wrapper: commissionReport: CommissionReport(execId='0001b266.699e86d4.01.01', commission=5.51073, currency='GBP', realizedPNL=0.0, yield_=0.0, yieldRedemptionDate=0)
2026-02-25 11:55:36,795 [INFO] ib_insync.ib: Synchronization complete
2026-02-25 11:55:36,796 [INFO] src.execution.ibkr_broker: Connected to IBKR at 127.0.0.1:7497 (clientId=73)
2026-02-25 11:55:36,796 [INFO] src.cli.runtime: Starting timed paper trial for 180s
2026-02-25 11:55:36,800 [INFO] src.cli.runtime: IBKR account detected: DUQ117408 (paper)
2026-02-25 11:55:36,801 [INFO] src.cli.runtime: Runtime DB (paper): trading_paper.db
2026-02-25 11:55:36,803 [INFO] src.trading.loop: Pre-warming strategy with recent 5-day history…
2026-02-25 11:55:37,046 [ERROR] yfinance: $HSBA.L: possibly delisted; no price data found  (1m 2026-02-20 -> 2026-02-20)
2026-02-25 11:55:37,046 [WARNING] src.data.feeds: Data provider 'yfinance' failed for HSBA.L: Empty dataset from provider 'yfinance'
2026-02-25 11:55:37,046 [WARNING] src.trading.loop:   HSBA.L: pre-warm failed — No data returned for HSBA.L. Check provider availability and date range.
2026-02-25 11:55:37,279 [ERROR] yfinance: $VOD.L: possibly delisted; no price data found  (1m 2026-02-20 -> 2026-02-20)
2026-02-25 11:55:37,279 [WARNING] src.data.feeds: Data provider 'yfinance' failed for VOD.L: Empty dataset from provider 'yfinance'
2026-02-25 11:55:37,279 [WARNING] src.trading.loop:   VOD.L: pre-warm failed — No data returned for VOD.L. Check provider availability and date range.
C:\Users\rando\Projects\trading-bot\src\data\market_data_store.py:187: UserWarning: Converting to PeriodArray/Index representation will drop timezone information.
  for month, month_df in df.groupby(df.index.to_period("M")):
2026-02-25 11:55:37,565 [ERROR] yfinance: $BP.L: possibly delisted; no price data found  (1m 2026-02-23 -> 2026-02-23)
2026-02-25 11:55:37,565 [WARNING] src.data.feeds: Data provider 'yfinance' failed for BP.L: Empty dataset from provider 'yfinance'
2026-02-25 11:55:37,565 [WARNING] src.trading.loop:   BP.L: pre-warm failed — No data returned for BP.L. Check provider availability and date range.
C:\Users\rando\Projects\trading-bot\src\data\market_data_store.py:187: UserWarning: Converting to PeriodArray/Index representation will drop timezone information.
  for month, month_df in df.groupby(df.index.to_period("M")):
C:\Users\rando\Projects\trading-bot\src\data\market_data_store.py:187: UserWarning: Converting to PeriodArray/Index representation will drop timezone information.
  for month, month_df in df.groupby(df.index.to_period("M")):
C:\Users\rando\Projects\trading-bot\src\data\market_data_store.py:187: UserWarning: Converting to PeriodArray/Index representation will drop timezone information.
  for month, month_df in df.groupby(df.index.to_period("M")):
2026-02-25 11:55:39,708 [INFO] src.trading.loop:   BARC.L: 1294 bars loaded (strategy ready: 1294 >= 16)
2026-02-25 11:55:39,951 [ERROR] yfinance: $SHEL.L: possibly delisted; no price data found  (1m 2026-02-20 -> 2026-02-20)
2026-02-25 11:55:39,952 [WARNING] src.data.feeds: Data provider 'yfinance' failed for SHEL.L: Empty dataset from provider 'yfinance'
2026-02-25 11:55:39,952 [WARNING] src.trading.loop:   SHEL.L: pre-warm failed — No data returned for SHEL.L. Check provider availability and date range.
2026-02-25 11:55:39,952 [INFO] src.cli.runtime: Paper trading started. Min bars required: 16. Polling every 300s. Ctrl+C to stop.
2026-02-25 11:55:40,051 [INFO] src.trading.loop: Initial portfolio value: $1,000,046.20
2026-02-25 11:55:40,051 [INFO] src.data.feeds: Stream started for ['HSBA.L', 'VOD.L', 'BP.L', 'BARC.L', 'SHEL.L'] (poll every 300s)
2026-02-25 11:55:40,412 [ERROR] ib_insync.wrapper: Error 354, reqId 20: Requested market data is not subscribed. Check API status by selecting the Account menu then under Management choose Market Data Subscription Manager and/or availability of delayed data.Delayed market data is available.HSBA LSE/TOP/ALL, contract: Stock(conId=909083, symbol='HSBA', exchange='LSE', currency='GBP', localSymbol='HSBA', tradingClass='SET1')
2026-02-25 11:55:40,662 [ERROR] ib_insync.wrapper: Error 354, reqId 21: Requested market data is not subscribed. Check API status by selecting the Account menu then under Management choose Market Data Subscription Manager and/or availability of delayed data.Delayed market data is available.BARC LSE/TOP/ALL, contract: Stock(conId=908940, symbol='BARC', exchange='LSE', currency='GBP', localSymbol='BARC', tradingClass='SET1')
2026-02-25 11:55:40,879 [INFO] src.trading.loop: Portfolio: $nan  cash=$996,938.43  positions=3  return=+nan%
2026-02-25 11:55:41,084 [ERROR] ib_insync.wrapper: Error 354, reqId 22: Requested market data is not subscribed. Check API status by selecting the Account menu then under Management choose Market Data Subscription Manager and/or availability of delayed data.Delayed market data is available.VOD LSE/TOP/ALL, contract: Stock(conId=140148322, symbol='VOD', exchange='LSE', currency='GBP', localSymbol='VOD', tradingClass='SET1')
2026-02-25 11:55:41,086 [ERROR] ib_insync.wrapper: Error 10168, reqId 23: Requested market data is not subscribed. Delayed market data is not enabled., contract: Stock(conId=909083, symbol='HSBA', exchange='LSE', currency='GBP', localSymbol='HSBA', tradingClass='SET1')
2026-02-25 11:55:41,299 [ERROR] ib_insync.wrapper: Error 10168, reqId 24: Requested market data is not subscribed. Delayed market data is not enabled., contract: Stock(conId=908940, symbol='BARC', exchange='LSE', currency='GBP', localSymbol='BARC', tradingClass='SET1')
2026-02-25 11:55:41,515 [ERROR] ib_insync.wrapper: Error 10168, reqId 25: Requested market data is not subscribed. Delayed market data is not enabled., contract: Stock(conId=140148322, symbol='VOD', exchange='LSE', currency='GBP', localSymbol='VOD', tradingClass='SET1')
2026-02-25 11:55:41,731 [INFO] src.trading.loop: Portfolio: $nan  cash=$996,938.43  positions=3  return=+nan%
2026-02-25 11:55:41,960 [ERROR] ib_insync.wrapper: Error 10168, reqId 26: Requested market data is not subscribed. Delayed market data is not enabled., contract: Stock(conId=909083, symbol='HSBA', exchange='LSE', currency='GBP', localSymbol='HSBA', tradingClass='SET1')
2026-02-25 11:55:42,166 [ERROR] ib_insync.wrapper: Error 10168, reqId 27: Requested market data is not subscribed. Delayed market data is not enabled., contract: Stock(conId=908940, symbol='BARC', exchange='LSE', currency='GBP', localSymbol='BARC', tradingClass='SET1')
2026-02-25 11:55:42,383 [ERROR] ib_insync.wrapper: Error 10168, reqId 28: Requested market data is not subscribed. Delayed market data is not enabled., contract: Stock(conId=140148322, symbol='VOD', exchange='LSE', currency='GBP', localSymbol='VOD', tradingClass='SET1')
2026-02-25 11:55:42,597 [INFO] src.trading.loop: Portfolio: $nan  cash=$996,938.43  positions=3  return=+nan%
2026-02-25 11:55:42,845 [ERROR] ib_insync.wrapper: Error 10168, reqId 29: Requested market data is not subscribed. Delayed market data is not enabled., contract: Stock(conId=909083, symbol='HSBA', exchange='LSE', currency='GBP', localSymbol='HSBA', tradingClass='SET1')
2026-02-25 11:55:43,048 [ERROR] ib_insync.wrapper: Error 10168, reqId 30: Requested market data is not subscribed. Delayed market data is not enabled., contract: Stock(conId=908940, symbol='BARC', exchange='LSE', currency='GBP', localSymbol='BARC', tradingClass='SET1')
2026-02-25 11:55:43,265 [ERROR] ib_insync.wrapper: Error 10168, reqId 31: Requested market data is not subscribed. Delayed market data is not enabled., contract: Stock(conId=140148322, symbol='VOD', exchange='LSE', currency='GBP', localSymbol='VOD', tradingClass='SET1')
2026-02-25 11:55:43,481 [INFO] ib_insync.ib: placeOrder: New order Trade(contract=Stock(symbol='BARC', exchange='SMART', primaryExchange='LSE', currency='GBP'), order=MarketOrder(orderId=32, clientId=73, action='BUY', totalQuantity=113), orderStatus=OrderStatus(orderId=32, status='PendingSubmit', filled=0.0, remaining=0.0, avgFillPrice=0.0, permId=0, parentId=0, lastFillPrice=0.0, clientId=0, whyHeld='', mktCapPrice=0.0), fills=[], log=[TradeLogEntry(time=datetime.datetime(2026, 2, 25, 11, 55, 43, 481485, tzinfo=datetime.timezone.utc), status='PendingSubmit', message='', errorCode=0)], advancedError='')
2026-02-25 11:55:43,574 [ERROR] ib_insync.wrapper: Error 10349, reqId 32: Order TIF was set to DAY based on order preset.
2026-02-25 11:55:43,574 [WARNING] ib_insync.wrapper: Canceled order: Trade(contract=Stock(symbol='BARC', exchange='SMART', primaryExchange='LSE', currency='GBP'), order=MarketOrder(orderId=32, clientId=73, action='BUY', totalQuantity=113), orderStatus=OrderStatus(orderId=32, status='Cancelled', filled=0.0, remaining=0.0, avgFillPrice=0.0, permId=0, parentId=0, lastFillPrice=0.0, clientId=0, whyHeld='', mktCapPrice=0.0), fills=[], log=[TradeLogEntry(time=datetime.datetime(2026, 2, 25, 11, 55, 43, 481485, tzinfo=datetime.timezone.utc), status='PendingSubmit', message='', errorCode=0), TradeLogEntry(time=datetime.datetime(2026, 2, 25, 11, 55, 43, 574360, tzinfo=datetime.timezone.utc), status='Cancelled', message='Error 10349, reqId 32: Order TIF was set to DAY based on order preset.', errorCode=10349)], advancedError='')
2026-02-25 11:55:43,756 [INFO] ib_insync.wrapper: orderStatus: Trade(contract=Stock(symbol='BARC', exchange='SMART', primaryExchange='LSE', currency='GBP'), order=MarketOrder(orderId=32, clientId=73, permId=59685777, action='BUY', totalQuantity=113.0, lmtPrice=0.0, auxPrice=0.0), orderStatus=OrderStatus(orderId=32, status='PreSubmitted', filled=0.0, remaining=113.0, avgFillPrice=0.0, permId=59685777, parentId=0, lastFillPrice=0.0, clientId=73, whyHeld='', mktCapPrice=0.0), fills=[], log=[TradeLogEntry(time=datetime.datetime(2026, 2, 25, 11, 55, 43, 481485, tzinfo=datetime.timezone.utc), status='PendingSubmit', message='', errorCode=0), TradeLogEntry(time=datetime.datetime(2026, 2, 25, 11, 55, 43, 574360, tzinfo=datetime.timezone.utc), status='Cancelled', message='Error 10349, reqId 32: Order TIF was set to DAY based on order preset.', errorCode=10349), TradeLogEntry(time=datetime.datetime(2026, 2, 25, 11, 55, 43, 755652, tzinfo=datetime.timezone.utc), status='PreSubmitted', message='', errorCode=0)], advancedError='')
2026-02-25 11:55:43,757 [INFO] ib_insync.wrapper: position: Position(account='DUQ117408', contract=Stock(conId=908940, symbol='BARC', exchange='LSE', currency='GBP', localSymbol='BARC', tradingClass='SET1'), position=559.0, avgCost=4.704144551341682)
2026-02-25 11:55:43,758 [INFO] ib_insync.wrapper: execDetails Execution(execId='0001b266.699e86e5.01.01', time=datetime.datetime(2026, 2, 25, 11, 55, 43, tzinfo=datetime.timezone.utc), acctNumber='DUQ117408', exchange='BATEUK', side='BOT', shares=113.0, price=465.3, permId=59685777, clientId=73, orderId=32, liquidation=0, cumQty=113.0, avgPrice=465.3, orderRef='', evRule='', evMultiplier=0.0, modelCode='', lastLiquidity=2)
2026-02-25 11:55:43,758 [INFO] ib_insync.wrapper: execDetails: Fill(contract=Stock(conId=908940, symbol='BARC', exchange='BATEUK', currency='GBP', localSymbol='BARC', tradingClass='SET1'), execution=Execution(execId='0001b266.699e86e5.01.01', time=datetime.datetime(2026, 2, 25, 11, 55, 43, tzinfo=datetime.timezone.utc), acctNumber='DUQ117408', exchange='BATEUK', side='BOT', shares=113.0, price=465.3, permId=59685777, clientId=73, orderId=32, liquidation=0, cumQty=113.0, avgPrice=465.3, orderRef='', evRule='', evMultiplier=0.0, modelCode='', lastLiquidity=2), commissionReport=CommissionReport(execId='', commission=0.0, currency='', realizedPNL=0.0, yield_=0.0, yieldRedemptionDate=0), time=datetime.datetime(2026, 2, 25, 11, 55, 43, 758651, tzinfo=datetime.timezone.utc))
2026-02-25 11:55:43,759 [INFO] ib_insync.wrapper: orderStatus: Trade(contract=Stock(symbol='BARC', exchange='SMART', primaryExchange='LSE', currency='GBP'), order=MarketOrder(orderId=32, clientId=73, permId=59685777, action='BUY', totalQuantity=113.0, lmtPrice=0.0, auxPrice=0.0), orderStatus=OrderStatus(orderId=32, status='Filled', filled=113.0, remaining=0.0, avgFillPrice=465.3, permId=59685777, parentId=0, lastFillPrice=465.3, clientId=73, whyHeld='', mktCapPrice=0.0), fills=[Fill(contract=Stock(conId=908940, symbol='BARC', exchange='BATEUK', currency='GBP', localSymbol='BARC', tradingClass='SET1'), execution=Execution(execId='0001b266.699e86e5.01.01', time=datetime.datetime(2026, 2, 25, 11, 55, 43, tzinfo=datetime.timezone.utc), acctNumber='DUQ117408', exchange='BATEUK', side='BOT', shares=113.0, price=465.3, permId=59685777, clientId=73, orderId=32, liquidation=0, cumQty=113.0, avgPrice=465.3, orderRef='', evRule='', evMultiplier=0.0, modelCode='', lastLiquidity=2), commissionReport=CommissionReport(execId='', commission=0.0, currency='', realizedPNL=0.0, yield_=0.0, yieldRedemptionDate=0), time=datetime.datetime(2026, 2, 25, 11, 55, 43, 758651, tzinfo=datetime.timezone.utc))], log=[TradeLogEntry(time=datetime.datetime(2026, 2, 25, 11, 55, 43, 481485, tzinfo=datetime.timezone.utc), status='PendingSubmit', message='', errorCode=0), TradeLogEntry(time=datetime.datetime(2026, 2, 25, 11, 55, 43, 574360, tzinfo=datetime.timezone.utc), status='Cancelled', message='Error 10349, reqId 32: Order TIF was set to DAY based on order preset.', errorCode=10349), TradeLogEntry(time=datetime.datetime(2026, 2, 25, 11, 55, 43, 755652, tzinfo=datetime.timezone.utc), status='PreSubmitted', message='', errorCode=0), TradeLogEntry(time=datetime.datetime(2026, 2, 25, 11, 55, 43, 758651, tzinfo=datetime.timezone.utc), status='PreSubmitted', message='Fill 113.0@465.3', errorCode=0), TradeLogEntry(time=datetime.datetime(2026, 2, 25, 11, 55, 43, 759152, tzinfo=datetime.timezone.utc), status='Filled', message='', errorCode=0)], advancedError='')
2026-02-25 11:55:43,759 [INFO] ib_insync.wrapper: commissionReport: CommissionReport(execId='0001b266.699e86e5.01.01', commission=5.628945, currency='GBP', realizedPNL=0.0, yield_=0.0, yieldRedemptionDate=0)
2026-02-25 11:55:43,760 [INFO] src.execution.ibkr_broker: Order BARC.L (32) filled at 465.3000 after 2 seconds (status: Filled)
2026-02-25 11:55:43,760 [INFO] src.trading.loop: ORDER FILLED: BUY 112.5343 BARC.L @ ~$465.30
2026-02-25 11:55:43,760 [INFO] ib_insync.wrapper: position: Position(account='DUQ117408', contract=Stock(conId=908940, symbol='BARC', exchange='LSE', currency='GBP', localSymbol='BARC', tradingClass='SET1'), position=559.0, avgCost=4.71421422039356)
2026-02-25 11:55:43,765 [ERROR] ib_insync.wrapper: Error 10168, reqId 33: Requested market data is not subscribed. Delayed market data is not enabled., contract: Stock(conId=909083, symbol='HSBA', exchange='LSE', currency='GBP', localSymbol='HSBA', tradingClass='SET1')
2026-02-25 11:55:43,978 [ERROR] ib_insync.wrapper: Error 10168, reqId 34: Requested market data is not subscribed. Delayed market data is not enabled., contract: Stock(conId=908940, symbol='BARC', exchange='LSE', currency='GBP', localSymbol='BARC', tradingClass='SET1')
2026-02-25 11:55:44,194 [ERROR] ib_insync.wrapper: Error 10168, reqId 35: Requested market data is not subscribed. Delayed market data is not enabled., contract: Stock(conId=140148322, symbol='VOD', exchange='LSE', currency='GBP', localSymbol='VOD', tradingClass='SET1')
2026-02-25 11:55:44,410 [INFO] src.trading.loop: Portfolio: $nan  cash=$996,938.43  positions=3  return=+nan%
2026-02-25 11:55:44,613 [ERROR] ib_insync.wrapper: Error 10168, reqId 36: Requested market data is not subscribed. Delayed market data is not enabled., contract: Stock(conId=909083, symbol='HSBA', exchange='LSE', currency='GBP', localSymbol='HSBA', tradingClass='SET1')
2026-02-25 11:55:44,682 [INFO] ib_insync.wrapper: updatePortfolio: PortfolioItem(contract=Stock(conId=908940, symbol='BARC', right='0', primaryExchange='LSE', currency='GBP', localSymbol='BARC', tradingClass='SET1'), position=559.0, marketPrice=4.6529999, marketValue=2601.03, averageCost=4.7142142, unrealizedPNL=-34.22, realizedPNL=0.0, account='DUQ117408')
2026-02-25 11:55:44,682 [INFO] ib_insync.wrapper: updatePortfolio: PortfolioItem(contract=Stock(conId=909083, symbol='HSBA', right='0', primaryExchange='LSE', currency='GBP', localSymbol='HSBA', tradingClass='SET1'), position=10.0, marketPrice=13.65600015, marketValue=136.56, averageCost=13.81023, unrealizedPNL=-1.54, realizedPNL=0.0, account='DUQ117408')
2026-02-25 11:55:44,683 [INFO] ib_insync.wrapper: updatePortfolio: PortfolioItem(contract=Stock(conId=140148322, symbol='VOD', right='0', primaryExchange='LSE', currency='GBP', localSymbol='VOD', tradingClass='SET1'), position=690.0, marketPrice=1.1745, marketValue=810.4, averageCost=1.1878884, unrealizedPNL=-9.24, realizedPNL=0.0, account='DUQ117408')
2026-02-25 11:55:44,828 [ERROR] ib_insync.wrapper: Error 10168, reqId 37: Requested market data is not subscribed. Delayed market data is not enabled., contract: Stock(conId=908940, symbol='BARC', exchange='LSE', currency='GBP', localSymbol='BARC', tradingClass='SET1')
2026-02-25 11:55:45,045 [ERROR] ib_insync.wrapper: Error 10168, reqId 38: Requested market data is not subscribed. Delayed market data is not enabled., contract: Stock(conId=140148322, symbol='VOD', exchange='LSE', currency='GBP', localSymbol='VOD', tradingClass='SET1')
2026-02-25 11:55:45,261 [INFO] src.trading.loop: Portfolio: $nan  cash=$996,407.01  positions=3  return=+nan%
2026-02-25 11:58:36,809 [INFO] ib_insync.ib: Disconnecting from 127.0.0.1:7497, 2.03 kB sent in 28 messages, 54.8 kB received in 1043 messages, session time 180 s.
2026-02-25 11:58:36,809 [INFO] ib_insync.client: Disconnecting
2026-02-25 11:58:36,810 [INFO] src.execution.ibkr_broker: Disconnected from IBKR
2026-02-25 11:58:36,810 [INFO] ib_insync.client: Disconnected.
2026-02-25 11:58:36,810 [INFO] src.cli.runtime: Paper trial duration reached (180s); stopping session
2026-02-25 11:58:36,813 [INFO] src.cli.runtime: Paper session summary export completed
2026-02-25 11:58:36,813 [INFO] src.cli.runtime:   json: reports\uk_tax\paper_session_summary.json
2026-02-25 11:58:36,813 [INFO] src.cli.runtime:   csv: reports\uk_tax\paper_session_summary.csv
2026-02-25 11:58:36,814 [INFO] src.cli.runtime:   fills=4/13 fill_rate=30.77% win_rate=0.00% pnl_gbp=0.00
