2026-02-25 11:48:33,609 [INFO] src.cli.runtime: [OK] Broker provider is IBKR
2026-02-25 11:48:33,610 [INFO] src.cli.runtime: [OK] Market timezone is Europe/London
2026-02-25 11:48:33,612 [INFO] src.cli.runtime: [OK] Base currency is GBP
2026-02-25 11:48:33,612 [INFO] src.cli.runtime: [OK] Detected UK symbols: HSBA.L, VOD.L, BP.L, BARC.L, SHEL.L
2026-02-25 11:48:33,613 [INFO] src.cli.runtime: [OK] DB isolation paths set (paper=trading_paper.db, live=trading_live.db, test=trading_test.db)
2026-02-25 11:48:33,649 [INFO] ib_insync.client: Connecting to 127.0.0.1:7497 with clientId 73...
2026-02-25 11:48:33,650 [INFO] ib_insync.client: Connected
2026-02-25 11:48:33,653 [INFO] ib_insync.client: Logged on to server version 176
2026-02-25 11:48:33,654 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:hfarm
2026-02-25 11:48:33,655 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:eufarmnj
2026-02-25 11:48:33,655 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:cashfarm
2026-02-25 11:48:33,655 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:usfuture
2026-02-25 11:48:33,655 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:jfarm
2026-02-25 11:48:33,655 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:usfarm.nj
2026-02-25 11:48:33,655 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:eufarm
2026-02-25 11:48:33,656 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:usfarm
2026-02-25 11:48:33,656 [INFO] ib_insync.wrapper: Warning 2106, reqId -1: HMDS data farm connection is OK:euhmds
2026-02-25 11:48:33,656 [INFO] ib_insync.wrapper: Warning 2106, reqId -1: HMDS data farm connection is OK:fundfarm
2026-02-25 11:48:33,656 [INFO] ib_insync.wrapper: Warning 2106, reqId -1: HMDS data farm connection is OK:ushmds
2026-02-25 11:48:33,656 [INFO] ib_insync.wrapper: Warning 2158, reqId -1: Sec-def data farm connection is OK:secdefnj
2026-02-25 11:48:33,656 [INFO] ib_insync.client: API connection ready
2026-02-25 11:48:33,658 [INFO] ib_insync.wrapper: position: Position(account='DUQ117408', contract=Stock(conId=909083, symbol='HSBA', exchange='LSE', currency='GBP', localSymbol='HSBA', tradingClass='SET1'), position=10.0, avgCost=13.81023)
2026-02-25 11:48:33,658 [INFO] ib_insync.wrapper: position: Position(account='DUQ117408', contract=Stock(conId=908940, symbol='BARC', exchange='LSE', currency='GBP', localSymbol='BARC', tradingClass='SET1'), position=338.0, avgCost=4.722399619378698)
2026-02-25 11:48:33,658 [INFO] ib_insync.wrapper: position: Position(account='DUQ117408', contract=Stock(conId=140148322, symbol='VOD', exchange='LSE', currency='GBP', localSymbol='VOD', tradingClass='SET1'), position=690.0, avgCost=1.1878884)
2026-02-25 11:48:33,759 [INFO] ib_insync.wrapper: updatePortfolio: PortfolioItem(contract=Stock(conId=908940, symbol='BARC', right='0', primaryExchange='LSE', currency='GBP', localSymbol='BARC', tradingClass='SET1'), position=338.0, marketPrice=4.64900015, marketValue=1571.36, averageCost=4.7223996, unrealizedPNL=-24.81, realizedPNL=0.0, account='DUQ117408')
2026-02-25 11:48:33,760 [INFO] ib_insync.wrapper: updatePortfolio: PortfolioItem(contract=Stock(conId=909083, symbol='HSBA', right='0', primaryExchange='LSE', currency='GBP', localSymbol='HSBA', tradingClass='SET1'), position=10.0, marketPrice=13.6591997, marketValue=136.59, averageCost=13.81023, unrealizedPNL=-1.51, realizedPNL=0.0, account='DUQ117408')
2026-02-25 11:48:33,760 [INFO] ib_insync.wrapper: updatePortfolio: PortfolioItem(contract=Stock(conId=140148322, symbol='VOD', right='0', primaryExchange='LSE', currency='GBP', localSymbol='VOD', tradingClass='SET1'), position=690.0, marketPrice=1.173, marketValue=809.37, averageCost=1.1878884, unrealizedPNL=-10.27, realizedPNL=0.0, account='DUQ117408')
2026-02-25 11:48:33,765 [INFO] ib_insync.wrapper: execDetails Execution(execId='0001b266.699e85ee.01.01', time=datetime.datetime(2026, 2, 25, 11, 0, 44, tzinfo=datetime.timezone.utc), acctNumber='DUQ117408', exchange='BATEUK', side='BOT', shares=119.0, price=466.25, permId=59685724, clientId=1, orderId=54, liquidation=0, cumQty=119.0, avgPrice=466.25, orderRef='', evRule='', evMultiplier=0.0, modelCode='', lastLiquidity=2)
2026-02-25 11:48:33,765 [INFO] ib_insync.wrapper: execDetails Execution(execId='0001b266.699e86c6.01.01', time=datetime.datetime(2026, 2, 25, 11, 38, 18, tzinfo=datetime.timezone.utc), acctNumber='DUQ117408', exchange='BATEUK', side='BOT', shares=112.0, price=465.35, permId=59685733, clientId=1, orderId=70, liquidation=0, cumQty=112.0, avgPrice=465.35, orderRef='', evRule='', evMultiplier=0.0, modelCode='', lastLiquidity=2)
2026-02-25 11:48:33,765 [INFO] ib_insync.wrapper: execDetails Execution(execId='0001b266.699e86d3.01.01', time=datetime.datetime(2026, 2, 25, 11, 48, 5, tzinfo=datetime.timezone.utc), acctNumber='DUQ117408', exchange='BATEUK', side='BOT', shares=105.0, price=464.9, permId=59685742, clientId=1, orderId=86, liquidation=0, cumQty=105.0, avgPrice=464.9, orderRef='', evRule='', evMultiplier=0.0, modelCode='', lastLiquidity=2)
2026-02-25 11:48:33,765 [INFO] ib_insync.wrapper: commissionReport: CommissionReport(execId='0001b266.699e85ee.01.01', commission=5.774188, currency='GBP', realizedPNL=0.0, yield_=0.0, yieldRedemptionDate=0)
2026-02-25 11:48:33,766 [INFO] ib_insync.wrapper: commissionReport: CommissionReport(execId='0001b266.699e86c6.01.01', commission=5.60596, currency='GBP', realizedPNL=0.0, yield_=0.0, yieldRedemptionDate=0)
2026-02-25 11:48:33,766 [INFO] ib_insync.wrapper: commissionReport: CommissionReport(execId='0001b266.699e86d3.01.01', commission=5.440725, currency='GBP', realizedPNL=0.0, yield_=0.0, yieldRedemptionDate=0)
2026-02-25 11:48:33,766 [INFO] ib_insync.ib: Synchronization complete
2026-02-25 11:48:33,766 [INFO] src.execution.ibkr_broker: Connected to IBKR at 127.0.0.1:7497 (clientId=73)
2026-02-25 11:48:33,766 [INFO] src.cli.runtime: [OK] IBKR connection established
2026-02-25 11:48:33,766 [INFO] src.cli.runtime: [OK] IBKR account detected: DUQ117408 (paper)
2026-02-25 11:48:33,767 [INFO] ib_insync.ib: Disconnecting from 127.0.0.1:7497, 118 B sent in 8 messages, 22.0 kB received in 421 messages, session time 118 ms.
2026-02-25 11:48:33,767 [INFO] ib_insync.client: Disconnecting
2026-02-25 11:48:33,767 [INFO] src.execution.ibkr_broker: Disconnected from IBKR
2026-02-25 11:48:33,767 [INFO] src.cli.runtime: UK health check complete: no blocking errors
2026-02-25 11:48:35,048 [ERROR] yfinance: $HSBA.L: possibly delisted; no price data found  (1m 2026-02-20 -> 2026-02-20)
2026-02-25 11:48:35,049 [WARNING] src.data.feeds: Data provider 'yfinance' failed for HSBA.L: Empty dataset from provider 'yfinance'
2026-02-25 11:48:35,378 [ERROR] yfinance: $VOD.L: possibly delisted; no price data found  (1m 2026-02-20 -> 2026-02-20)
2026-02-25 11:48:35,378 [WARNING] src.data.feeds: Data provider 'yfinance' failed for VOD.L: Empty dataset from provider 'yfinance'
C:\Users\rando\Projects\trading-bot\src\data\market_data_store.py:187: UserWarning: Converting to PeriodArray/Index representation will drop timezone information.
  for month, month_df in df.groupby(df.index.to_period("M")):
2026-02-25 11:48:35,969 [ERROR] yfinance: $BP.L: possibly delisted; no price data found  (1m 2026-02-23 -> 2026-02-23)
2026-02-25 11:48:35,969 [WARNING] src.data.feeds: Data provider 'yfinance' failed for BP.L: Empty dataset from provider 'yfinance'
C:\Users\rando\Projects\trading-bot\src\data\market_data_store.py:187: UserWarning: Converting to PeriodArray/Index representation will drop timezone information.
  for month, month_df in df.groupby(df.index.to_period("M")):
C:\Users\rando\Projects\trading-bot\src\data\market_data_store.py:187: UserWarning: Converting to PeriodArray/Index representation will drop timezone information.
  for month, month_df in df.groupby(df.index.to_period("M")):
C:\Users\rando\Projects\trading-bot\src\data\market_data_store.py:187: UserWarning: Converting to PeriodArray/Index representation will drop timezone information.
  for month, month_df in df.groupby(df.index.to_period("M")):
2026-02-25 11:48:37,373 [ERROR] yfinance: $SHEL.L: possibly delisted; no price data found  (1m 2026-02-20 -> 2026-02-20)
2026-02-25 11:48:37,374 [WARNING] src.data.feeds: Data provider 'yfinance' failed for SHEL.L: Empty dataset from provider 'yfinance'
2026-02-25 11:48:37,374 [INFO] ib_insync.client: Connecting to 127.0.0.1:7497 with clientId 73...
2026-02-25 11:48:37,375 [INFO] ib_insync.client: Connected
2026-02-25 11:48:37,377 [INFO] ib_insync.client: Logged on to server version 176
2026-02-25 11:48:37,378 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:hfarm
2026-02-25 11:48:37,378 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:eufarmnj
2026-02-25 11:48:37,378 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:cashfarm
2026-02-25 11:48:37,379 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:usfuture
2026-02-25 11:48:37,379 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:jfarm
2026-02-25 11:48:37,379 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:usfarm.nj
2026-02-25 11:48:37,379 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:eufarm
2026-02-25 11:48:37,379 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:usfarm
2026-02-25 11:48:37,379 [INFO] ib_insync.wrapper: Warning 2106, reqId -1: HMDS data farm connection is OK:euhmds
2026-02-25 11:48:37,379 [INFO] ib_insync.wrapper: Warning 2106, reqId -1: HMDS data farm connection is OK:fundfarm
2026-02-25 11:48:37,380 [INFO] ib_insync.wrapper: Warning 2106, reqId -1: HMDS data farm connection is OK:ushmds
2026-02-25 11:48:37,380 [INFO] ib_insync.wrapper: Warning 2158, reqId -1: Sec-def data farm connection is OK:secdefnj
2026-02-25 11:48:37,380 [INFO] ib_insync.client: API connection ready
2026-02-25 11:48:37,381 [INFO] ib_insync.wrapper: position: Position(account='DUQ117408', contract=Stock(conId=909083, symbol='HSBA', exchange='LSE', currency='GBP', localSymbol='HSBA', tradingClass='SET1'), position=10.0, avgCost=13.81023)
2026-02-25 11:48:37,382 [INFO] ib_insync.wrapper: position: Position(account='DUQ117408', contract=Stock(conId=908940, symbol='BARC', exchange='LSE', currency='GBP', localSymbol='BARC', tradingClass='SET1'), position=338.0, avgCost=4.722399619378698)
2026-02-25 11:48:37,382 [INFO] ib_insync.wrapper: position: Position(account='DUQ117408', contract=Stock(conId=140148322, symbol='VOD', exchange='LSE', currency='GBP', localSymbol='VOD', tradingClass='SET1'), position=690.0, avgCost=1.1878884)
2026-02-25 11:48:37,484 [INFO] ib_insync.wrapper: updatePortfolio: PortfolioItem(contract=Stock(conId=908940, symbol='BARC', right='0', primaryExchange='LSE', currency='GBP', localSymbol='BARC', tradingClass='SET1'), position=338.0, marketPrice=4.64900015, marketValue=1571.36, averageCost=4.7223996, unrealizedPNL=-24.81, realizedPNL=0.0, account='DUQ117408')
2026-02-25 11:48:37,484 [INFO] ib_insync.wrapper: updatePortfolio: PortfolioItem(contract=Stock(conId=909083, symbol='HSBA', right='0', primaryExchange='LSE', currency='GBP', localSymbol='HSBA', tradingClass='SET1'), position=10.0, marketPrice=13.6591997, marketValue=136.59, averageCost=13.81023, unrealizedPNL=-1.51, realizedPNL=0.0, account='DUQ117408')
2026-02-25 11:48:37,484 [INFO] ib_insync.wrapper: updatePortfolio: PortfolioItem(contract=Stock(conId=140148322, symbol='VOD', right='0', primaryExchange='LSE', currency='GBP', localSymbol='VOD', tradingClass='SET1'), position=690.0, marketPrice=1.173, marketValue=809.37, averageCost=1.1878884, unrealizedPNL=-10.27, realizedPNL=0.0, account='DUQ117408')
2026-02-25 11:48:37,487 [INFO] ib_insync.wrapper: execDetails Execution(execId='0001b266.699e85ee.01.01', time=datetime.datetime(2026, 2, 25, 11, 0, 44, tzinfo=datetime.timezone.utc), acctNumber='DUQ117408', exchange='BATEUK', side='BOT', shares=119.0, price=466.25, permId=59685724, clientId=1, orderId=54, liquidation=0, cumQty=119.0, avgPrice=466.25, orderRef='', evRule='', evMultiplier=0.0, modelCode='', lastLiquidity=2)
2026-02-25 11:48:37,487 [INFO] ib_insync.wrapper: execDetails Execution(execId='0001b266.699e86c6.01.01', time=datetime.datetime(2026, 2, 25, 11, 38, 18, tzinfo=datetime.timezone.utc), acctNumber='DUQ117408', exchange='BATEUK', side='BOT', shares=112.0, price=465.35, permId=59685733, clientId=1, orderId=70, liquidation=0, cumQty=112.0, avgPrice=465.35, orderRef='', evRule='', evMultiplier=0.0, modelCode='', lastLiquidity=2)
2026-02-25 11:48:37,487 [INFO] ib_insync.wrapper: execDetails Execution(execId='0001b266.699e86d3.01.01', time=datetime.datetime(2026, 2, 25, 11, 48, 5, tzinfo=datetime.timezone.utc), acctNumber='DUQ117408', exchange='BATEUK', side='BOT', shares=105.0, price=464.9, permId=59685742, clientId=1, orderId=86, liquidation=0, cumQty=105.0, avgPrice=464.9, orderRef='', evRule='', evMultiplier=0.0, modelCode='', lastLiquidity=2)
2026-02-25 11:48:37,487 [INFO] ib_insync.wrapper: commissionReport: CommissionReport(execId='0001b266.699e85ee.01.01', commission=5.774188, currency='GBP', realizedPNL=0.0, yield_=0.0, yieldRedemptionDate=0)
2026-02-25 11:48:37,488 [INFO] ib_insync.wrapper: commissionReport: CommissionReport(execId='0001b266.699e86c6.01.01', commission=5.60596, currency='GBP', realizedPNL=0.0, yield_=0.0, yieldRedemptionDate=0)
2026-02-25 11:48:37,488 [INFO] ib_insync.wrapper: commissionReport: CommissionReport(execId='0001b266.699e86d3.01.01', commission=5.440725, currency='GBP', realizedPNL=0.0, yield_=0.0, yieldRedemptionDate=0)
2026-02-25 11:48:37,488 [INFO] ib_insync.ib: Synchronization complete
2026-02-25 11:48:37,488 [INFO] src.execution.ibkr_broker: Connected to IBKR at 127.0.0.1:7497 (clientId=73)
2026-02-25 11:48:37,488 [INFO] src.cli.runtime: Starting timed paper trial for 180s
2026-02-25 11:48:37,492 [INFO] src.cli.runtime: IBKR account detected: DUQ117408 (paper)
2026-02-25 11:48:37,494 [INFO] src.cli.runtime: Runtime DB (paper): trading_paper.db
2026-02-25 11:48:37,495 [INFO] src.trading.loop: Pre-warming strategy with recent 5-day history…
2026-02-25 11:48:37,737 [ERROR] yfinance: $HSBA.L: possibly delisted; no price data found  (1m 2026-02-20 -> 2026-02-20)
2026-02-25 11:48:37,737 [WARNING] src.data.feeds: Data provider 'yfinance' failed for HSBA.L: Empty dataset from provider 'yfinance'
2026-02-25 11:48:37,737 [WARNING] src.trading.loop:   HSBA.L: pre-warm failed — No data returned for HSBA.L. Check provider availability and date range.
2026-02-25 11:48:37,969 [ERROR] yfinance: $VOD.L: possibly delisted; no price data found  (1m 2026-02-20 -> 2026-02-20)
2026-02-25 11:48:37,970 [WARNING] src.data.feeds: Data provider 'yfinance' failed for VOD.L: Empty dataset from provider 'yfinance'
2026-02-25 11:48:37,970 [WARNING] src.trading.loop:   VOD.L: pre-warm failed — No data returned for VOD.L. Check provider availability and date range.
C:\Users\rando\Projects\trading-bot\src\data\market_data_store.py:187: UserWarning: Converting to PeriodArray/Index representation will drop timezone information.
  for month, month_df in df.groupby(df.index.to_period("M")):
2026-02-25 11:48:38,258 [ERROR] yfinance: $BP.L: possibly delisted; no price data found  (1m 2026-02-23 -> 2026-02-23)
2026-02-25 11:48:38,259 [WARNING] src.data.feeds: Data provider 'yfinance' failed for BP.L: Empty dataset from provider 'yfinance'
2026-02-25 11:48:38,259 [WARNING] src.trading.loop:   BP.L: pre-warm failed — No data returned for BP.L. Check provider availability and date range.
C:\Users\rando\Projects\trading-bot\src\data\market_data_store.py:187: UserWarning: Converting to PeriodArray/Index representation will drop timezone information.
  for month, month_df in df.groupby(df.index.to_period("M")):
C:\Users\rando\Projects\trading-bot\src\data\market_data_store.py:187: UserWarning: Converting to PeriodArray/Index representation will drop timezone information.
  for month, month_df in df.groupby(df.index.to_period("M")):
C:\Users\rando\Projects\trading-bot\src\data\market_data_store.py:187: UserWarning: Converting to PeriodArray/Index representation will drop timezone information.
  for month, month_df in df.groupby(df.index.to_period("M")):
2026-02-25 11:48:40,409 [INFO] src.trading.loop:   BARC.L: 1301 bars loaded (strategy ready: 1301 >= 16)
2026-02-25 11:48:40,645 [ERROR] yfinance: $SHEL.L: possibly delisted; no price data found  (1m 2026-02-20 -> 2026-02-20)
2026-02-25 11:48:40,645 [WARNING] src.data.feeds: Data provider 'yfinance' failed for SHEL.L: Empty dataset from provider 'yfinance'
2026-02-25 11:48:40,646 [WARNING] src.trading.loop:   SHEL.L: pre-warm failed — No data returned for SHEL.L. Check provider availability and date range.
2026-02-25 11:48:40,646 [INFO] src.cli.runtime: Paper trading started. Min bars required: 16. Polling every 300s. Ctrl+C to stop.
2026-02-25 11:48:40,749 [INFO] src.trading.loop: Initial portfolio value: $1,000,051.60
2026-02-25 11:48:40,750 [INFO] src.data.feeds: Stream started for ['HSBA.L', 'VOD.L', 'BP.L', 'BARC.L', 'SHEL.L'] (poll every 300s)
2026-02-25 11:48:40,947 [ERROR] ib_insync.wrapper: Error 10168, reqId 4: Requested market data is not subscribed. Delayed market data is not enabled., contract: Stock(conId=909083, symbol='HSBA', exchange='LSE', currency='GBP', localSymbol='HSBA', tradingClass='SET1')
2026-02-25 11:48:41,160 [ERROR] ib_insync.wrapper: Error 10168, reqId 5: Requested market data is not subscribed. Delayed market data is not enabled., contract: Stock(conId=908940, symbol='BARC', exchange='LSE', currency='GBP', localSymbol='BARC', tradingClass='SET1')
2026-02-25 11:48:41,377 [ERROR] ib_insync.wrapper: Error 10168, reqId 6: Requested market data is not subscribed. Delayed market data is not enabled., contract: Stock(conId=140148322, symbol='VOD', exchange='LSE', currency='GBP', localSymbol='VOD', tradingClass='SET1')
2026-02-25 11:48:41,592 [INFO] src.trading.loop: Portfolio: $nan  cash=$997,446.08  positions=3  return=+nan%
2026-02-25 11:48:41,794 [ERROR] ib_insync.wrapper: Error 10168, reqId 7: Requested market data is not subscribed. Delayed market data is not enabled., contract: Stock(conId=909083, symbol='HSBA', exchange='LSE', currency='GBP', localSymbol='HSBA', tradingClass='SET1')
2026-02-25 11:48:41,997 [ERROR] ib_insync.wrapper: Error 10168, reqId 8: Requested market data is not subscribed. Delayed market data is not enabled., contract: Stock(conId=908940, symbol='BARC', exchange='LSE', currency='GBP', localSymbol='BARC', tradingClass='SET1')
2026-02-25 11:48:42,198 [ERROR] ib_insync.wrapper: Error 10168, reqId 9: Requested market data is not subscribed. Delayed market data is not enabled., contract: Stock(conId=140148322, symbol='VOD', exchange='LSE', currency='GBP', localSymbol='VOD', tradingClass='SET1')
2026-02-25 11:48:42,413 [INFO] src.trading.loop: Portfolio: $nan  cash=$997,446.08  positions=3  return=+nan%
2026-02-25 11:48:42,620 [ERROR] ib_insync.wrapper: Error 10168, reqId 10: Requested market data is not subscribed. Delayed market data is not enabled., contract: Stock(conId=909083, symbol='HSBA', exchange='LSE', currency='GBP', localSymbol='HSBA', tradingClass='SET1')
2026-02-25 11:48:42,833 [ERROR] ib_insync.wrapper: Error 10168, reqId 11: Requested market data is not subscribed. Delayed market data is not enabled., contract: Stock(conId=908940, symbol='BARC', exchange='LSE', currency='GBP', localSymbol='BARC', tradingClass='SET1')
2026-02-25 11:48:43,049 [ERROR] ib_insync.wrapper: Error 10168, reqId 12: Requested market data is not subscribed. Delayed market data is not enabled., contract: Stock(conId=140148322, symbol='VOD', exchange='LSE', currency='GBP', localSymbol='VOD', tradingClass='SET1')
2026-02-25 11:48:43,263 [INFO] src.trading.loop: Portfolio: $nan  cash=$997,446.08  positions=3  return=+nan%
2026-02-25 11:48:43,478 [ERROR] ib_insync.wrapper: Error 10168, reqId 13: Requested market data is not subscribed. Delayed market data is not enabled., contract: Stock(conId=909083, symbol='HSBA', exchange='LSE', currency='GBP', localSymbol='HSBA', tradingClass='SET1')
2026-02-25 11:48:43,683 [ERROR] ib_insync.wrapper: Error 10168, reqId 14: Requested market data is not subscribed. Delayed market data is not enabled., contract: Stock(conId=908940, symbol='BARC', exchange='LSE', currency='GBP', localSymbol='BARC', tradingClass='SET1')
2026-02-25 11:48:43,900 [ERROR] ib_insync.wrapper: Error 10168, reqId 15: Requested market data is not subscribed. Delayed market data is not enabled., contract: Stock(conId=140148322, symbol='VOD', exchange='LSE', currency='GBP', localSymbol='VOD', tradingClass='SET1')
2026-02-25 11:48:44,115 [INFO] ib_insync.ib: placeOrder: New order Trade(contract=Stock(symbol='BARC', exchange='SMART', primaryExchange='LSE', currency='GBP'), order=MarketOrder(orderId=16, clientId=73, action='BUY', totalQuantity=108), orderStatus=OrderStatus(orderId=16, status='PendingSubmit', filled=0.0, remaining=0.0, avgFillPrice=0.0, permId=0, parentId=0, lastFillPrice=0.0, clientId=0, whyHeld='', mktCapPrice=0.0), fills=[], log=[TradeLogEntry(time=datetime.datetime(2026, 2, 25, 11, 48, 44, 115162, tzinfo=datetime.timezone.utc), status='PendingSubmit', message='', errorCode=0)], advancedError='')
2026-02-25 11:48:44,206 [ERROR] ib_insync.wrapper: Error 10349, reqId 16: Order TIF was set to DAY based on order preset.
2026-02-25 11:48:44,207 [WARNING] ib_insync.wrapper: Canceled order: Trade(contract=Stock(symbol='BARC', exchange='SMART', primaryExchange='LSE', currency='GBP'), order=MarketOrder(orderId=16, clientId=73, action='BUY', totalQuantity=108), orderStatus=OrderStatus(orderId=16, status='Cancelled', filled=0.0, remaining=0.0, avgFillPrice=0.0, permId=0, parentId=0, lastFillPrice=0.0, clientId=0, whyHeld='', mktCapPrice=0.0), fills=[], log=[TradeLogEntry(time=datetime.datetime(2026, 2, 25, 11, 48, 44, 115162, tzinfo=datetime.timezone.utc), status='PendingSubmit', message='', errorCode=0), TradeLogEntry(time=datetime.datetime(2026, 2, 25, 11, 48, 44, 206692, tzinfo=datetime.timezone.utc), status='Cancelled', message='Error 10349, reqId 16: Order TIF was set to DAY based on order preset.', errorCode=10349)], advancedError='')
2026-02-25 11:48:44,387 [INFO] ib_insync.wrapper: orderStatus: Trade(contract=Stock(symbol='BARC', exchange='SMART', primaryExchange='LSE', currency='GBP'), order=MarketOrder(orderId=16, clientId=73, permId=59685752, action='BUY', totalQuantity=108.0, lmtPrice=0.0, auxPrice=0.0), orderStatus=OrderStatus(orderId=16, status='PreSubmitted', filled=0.0, remaining=108.0, avgFillPrice=0.0, permId=59685752, parentId=0, lastFillPrice=0.0, clientId=73, whyHeld='', mktCapPrice=0.0), fills=[], log=[TradeLogEntry(time=datetime.datetime(2026, 2, 25, 11, 48, 44, 115162, tzinfo=datetime.timezone.utc), status='PendingSubmit', message='', errorCode=0), TradeLogEntry(time=datetime.datetime(2026, 2, 25, 11, 48, 44, 206692, tzinfo=datetime.timezone.utc), status='Cancelled', message='Error 10349, reqId 16: Order TIF was set to DAY based on order preset.', errorCode=10349), TradeLogEntry(time=datetime.datetime(2026, 2, 25, 11, 48, 44, 387141, tzinfo=datetime.timezone.utc), status='PreSubmitted', message='', errorCode=0)], advancedError='')
2026-02-25 11:48:44,388 [INFO] ib_insync.wrapper: position: Position(account='DUQ117408', contract=Stock(conId=908940, symbol='BARC', exchange='LSE', currency='GBP', localSymbol='BARC', tradingClass='SET1'), position=446.0, avgCost=4.704746796748879)
2026-02-25 11:48:44,390 [INFO] ib_insync.wrapper: execDetails Execution(execId='0001b266.699e86d4.01.01', time=datetime.datetime(2026, 2, 25, 11, 48, 44, tzinfo=datetime.timezone.utc), acctNumber='DUQ117408', exchange='BATEUK', side='BOT', shares=108.0, price=464.95, permId=59685752, clientId=73, orderId=16, liquidation=0, cumQty=108.0, avgPrice=464.95, orderRef='', evRule='', evMultiplier=0.0, modelCode='', lastLiquidity=2)
2026-02-25 11:48:44,390 [INFO] ib_insync.wrapper: execDetails: Fill(contract=Stock(conId=908940, symbol='BARC', exchange='BATEUK', currency='GBP', localSymbol='BARC', tradingClass='SET1'), execution=Execution(execId='0001b266.699e86d4.01.01', time=datetime.datetime(2026, 2, 25, 11, 48, 44, tzinfo=datetime.timezone.utc), acctNumber='DUQ117408', exchange='BATEUK', side='BOT', shares=108.0, price=464.95, permId=59685752, clientId=73, orderId=16, liquidation=0, cumQty=108.0, avgPrice=464.95, orderRef='', evRule='', evMultiplier=0.0, modelCode='', lastLiquidity=2), commissionReport=CommissionReport(execId='', commission=0.0, currency='', realizedPNL=0.0, yield_=0.0, yieldRedemptionDate=0), time=datetime.datetime(2026, 2, 25, 11, 48, 44, 390144, tzinfo=datetime.timezone.utc))
2026-02-25 11:48:44,391 [INFO] ib_insync.wrapper: orderStatus: Trade(contract=Stock(symbol='BARC', exchange='SMART', primaryExchange='LSE', currency='GBP'), order=MarketOrder(orderId=16, clientId=73, permId=59685752, action='BUY', totalQuantity=108.0, lmtPrice=0.0, auxPrice=0.0), orderStatus=OrderStatus(orderId=16, status='Filled', filled=108.0, remaining=0.0, avgFillPrice=464.95, permId=59685752, parentId=0, lastFillPrice=464.95, clientId=73, whyHeld='', mktCapPrice=0.0), fills=[Fill(contract=Stock(conId=908940, symbol='BARC', exchange='BATEUK', currency='GBP', localSymbol='BARC', tradingClass='SET1'), execution=Execution(execId='0001b266.699e86d4.01.01', time=datetime.datetime(2026, 2, 25, 11, 48, 44, tzinfo=datetime.timezone.utc), acctNumber='DUQ117408', exchange='BATEUK', side='BOT', shares=108.0, price=464.95, permId=59685752, clientId=73, orderId=16, liquidation=0, cumQty=108.0, avgPrice=464.95, orderRef='', evRule='', evMultiplier=0.0, modelCode='', lastLiquidity=2), commissionReport=CommissionReport(execId='', commission=0.0, currency='', realizedPNL=0.0, yield_=0.0, yieldRedemptionDate=0), time=datetime.datetime(2026, 2, 25, 11, 48, 44, 390144, tzinfo=datetime.timezone.utc))], log=[TradeLogEntry(time=datetime.datetime(2026, 2, 25, 11, 48, 44, 115162, tzinfo=datetime.timezone.utc), status='PendingSubmit', message='', errorCode=0), TradeLogEntry(time=datetime.datetime(2026, 2, 25, 11, 48, 44, 206692, tzinfo=datetime.timezone.utc), status='Cancelled', message='Error 10349, reqId 16: Order TIF was set to DAY based on order preset.', errorCode=10349), TradeLogEntry(time=datetime.datetime(2026, 2, 25, 11, 48, 44, 387141, tzinfo=datetime.timezone.utc), status='PreSubmitted', message='', errorCode=0), TradeLogEntry(time=datetime.datetime(2026, 2, 25, 11, 48, 44, 390144, tzinfo=datetime.timezone.utc), status='PreSubmitted', message='Fill 108.0@464.95', errorCode=0), TradeLogEntry(time=datetime.datetime(2026, 2, 25, 11, 48, 44, 391144, tzinfo=datetime.timezone.utc), status='Filled', message='', errorCode=0)], advancedError='')
2026-02-25 11:48:44,392 [INFO] ib_insync.wrapper: commissionReport: CommissionReport(execId='0001b266.699e86d4.01.01', commission=5.51073, currency='GBP', realizedPNL=0.0, yield_=0.0, yieldRedemptionDate=0)
2026-02-25 11:48:44,392 [INFO] src.execution.ibkr_broker: Order BARC.L (16) filled at 464.9500 after 2 seconds (status: Filled)
2026-02-25 11:48:44,392 [INFO] src.trading.loop: ORDER FILLED: BUY 107.9982 BARC.L @ ~$464.85
2026-02-25 11:48:44,392 [INFO] ib_insync.wrapper: position: Position(account='DUQ117408', contract=Stock(conId=908940, symbol='BARC', exchange='LSE', currency='GBP', localSymbol='BARC', tradingClass='SET1'), position=446.0, avgCost=4.717102693609866)
2026-02-25 11:48:44,400 [ERROR] ib_insync.wrapper: Error 10168, reqId 17: Requested market data is not subscribed. Delayed market data is not enabled., contract: Stock(conId=909083, symbol='HSBA', exchange='LSE', currency='GBP', localSymbol='HSBA', tradingClass='SET1')
2026-02-25 11:48:44,612 [ERROR] ib_insync.wrapper: Error 10168, reqId 18: Requested market data is not subscribed. Delayed market data is not enabled., contract: Stock(conId=908940, symbol='BARC', exchange='LSE', currency='GBP', localSymbol='BARC', tradingClass='SET1')
2026-02-25 11:48:44,827 [ERROR] ib_insync.wrapper: Error 10168, reqId 19: Requested market data is not subscribed. Delayed market data is not enabled., contract: Stock(conId=140148322, symbol='VOD', exchange='LSE', currency='GBP', localSymbol='VOD', tradingClass='SET1')
2026-02-25 11:48:45,041 [INFO] src.trading.loop: Portfolio: $nan  cash=$997,446.08  positions=3  return=+nan%
2026-02-25 11:48:45,257 [ERROR] ib_insync.wrapper: Error 10168, reqId 20: Requested market data is not subscribed. Delayed market data is not enabled., contract: Stock(conId=909083, symbol='HSBA', exchange='LSE', currency='GBP', localSymbol='HSBA', tradingClass='SET1')
2026-02-25 11:48:45,313 [INFO] ib_insync.wrapper: updatePortfolio: PortfolioItem(contract=Stock(conId=908940, symbol='BARC', right='0', primaryExchange='LSE', currency='GBP', localSymbol='BARC', tradingClass='SET1'), position=446.0, marketPrice=4.6494999, marketValue=2073.68, averageCost=4.7171027, unrealizedPNL=-30.15, realizedPNL=0.0, account='DUQ117408')
2026-02-25 11:48:45,314 [INFO] ib_insync.wrapper: updatePortfolio: PortfolioItem(contract=Stock(conId=909083, symbol='HSBA', right='0', primaryExchange='LSE', currency='GBP', localSymbol='HSBA', tradingClass='SET1'), position=10.0, marketPrice=13.66600035, marketValue=136.66, averageCost=13.81023, unrealizedPNL=-1.44, realizedPNL=0.0, account='DUQ117408')
2026-02-25 11:48:45,477 [ERROR] ib_insync.wrapper: Error 10168, reqId 21: Requested market data is not subscribed. Delayed market data is not enabled., contract: Stock(conId=908940, symbol='BARC', exchange='LSE', currency='GBP', localSymbol='BARC', tradingClass='SET1')
2026-02-25 11:48:45,694 [ERROR] ib_insync.wrapper: Error 10168, reqId 22: Requested market data is not subscribed. Delayed market data is not enabled., contract: Stock(conId=140148322, symbol='VOD', exchange='LSE', currency='GBP', localSymbol='VOD', tradingClass='SET1')
2026-02-25 11:48:45,910 [INFO] src.trading.loop: Portfolio: $nan  cash=$996,938.43  positions=3  return=+nan%
2026-02-25 11:51:37,502 [INFO] ib_insync.ib: Disconnecting from 127.0.0.1:7497, 2.02 kB sent in 28 messages, 60.5 kB received in 1212 messages, session time 180 s.
2026-02-25 11:51:37,502 [INFO] ib_insync.client: Disconnecting
2026-02-25 11:51:37,503 [INFO] src.execution.ibkr_broker: Disconnected from IBKR
2026-02-25 11:51:37,503 [INFO] ib_insync.client: Disconnected.
2026-02-25 11:51:37,503 [INFO] src.cli.runtime: Paper trial duration reached (180s); stopping session
2026-02-25 11:51:37,506 [INFO] src.cli.runtime: Paper session summary export completed
2026-02-25 11:51:37,506 [INFO] src.cli.runtime:   json: reports\uk_tax\paper_session_summary.json
2026-02-25 11:51:37,506 [INFO] src.cli.runtime:   csv: reports\uk_tax\paper_session_summary.csv
2026-02-25 11:51:37,506 [INFO] src.cli.runtime:   fills=3/12 fill_rate=25.00% win_rate=0.00% pnl_gbp=0.00
