2026-02-24 21:13:47,022 [INFO] __main__: [OK] Broker provider is IBKR
2026-02-24 21:13:47,023 [INFO] __main__: [OK] Market timezone is Europe/London
2026-02-24 21:13:47,024 [INFO] __main__: [OK] Base currency is GBP
2026-02-24 21:13:47,025 [INFO] __main__: [OK] Detected UK symbols: HSBA.L, VOD.L, BP.L, BARC.L, SHEL.L
2026-02-24 21:13:47,025 [INFO] __main__: [OK] DB isolation paths set (paper=trading_paper.db, live=trading_live.db, test=trading_test.db)
2026-02-24 21:13:47,064 [INFO] ib_insync.client: Connecting to 127.0.0.1:7497 with clientId 1...
2026-02-24 21:13:47,065 [INFO] ib_insync.client: Connected
2026-02-24 21:13:47,068 [INFO] ib_insync.client: Logged on to server version 176
2026-02-24 21:13:47,069 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:hfarm
2026-02-24 21:13:47,070 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:eufarmnj
2026-02-24 21:13:47,070 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:cashfarm
2026-02-24 21:13:47,070 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:usfuture
2026-02-24 21:13:47,070 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:jfarm
2026-02-24 21:13:47,070 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:usfarm.nj
2026-02-24 21:13:47,071 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:eufarm
2026-02-24 21:13:47,071 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:usfarm
2026-02-24 21:13:47,071 [INFO] ib_insync.wrapper: Warning 2106, reqId -1: HMDS data farm connection is OK:euhmds
2026-02-24 21:13:47,071 [INFO] ib_insync.wrapper: Warning 2106, reqId -1: HMDS data farm connection is OK:fundfarm
2026-02-24 21:13:47,072 [INFO] ib_insync.wrapper: Warning 2106, reqId -1: HMDS data farm connection is OK:ushmds
2026-02-24 21:13:47,072 [INFO] ib_insync.wrapper: Warning 2158, reqId -1: Sec-def data farm connection is OK:secdefnj
2026-02-24 21:13:47,072 [INFO] ib_insync.client: API connection ready
2026-02-24 21:13:47,074 [INFO] ib_insync.wrapper: position: Position(account='DUQ117408', contract=Stock(conId=909083, symbol='HSBA', exchange='LSE', currency='GBP', localSymbol='HSBA', tradingClass='SET1'), position=10.0, avgCost=13.81023)
2026-02-24 21:13:47,074 [INFO] ib_insync.wrapper: position: Position(account='DUQ117408', contract=Stock(conId=908940, symbol='BARC', exchange='LSE', currency='GBP', localSymbol='BARC', tradingClass='SET1'), position=2.0, avgCost=7.587825)
2026-02-24 21:13:47,074 [INFO] ib_insync.wrapper: position: Position(account='DUQ117408', contract=Stock(conId=140148322, symbol='VOD', exchange='LSE', currency='GBP', localSymbol='VOD', tradingClass='SET1'), position=690.0, avgCost=1.1878841)
2026-02-24 21:13:47,176 [INFO] ib_insync.wrapper: updatePortfolio: PortfolioItem(contract=Stock(conId=908940, symbol='BARC', right='0', primaryExchange='LSE', currency='GBP', localSymbol='BARC', tradingClass='SET1'), position=2.0, marketPrice=4.59246875, marketValue=9.18, averageCost=7.587825, unrealizedPNL=-5.99, realizedPNL=0.0, account='DUQ117408')
2026-02-24 21:13:47,176 [INFO] ib_insync.wrapper: updatePortfolio: PortfolioItem(contract=Stock(conId=909083, symbol='HSBA', right='0', primaryExchange='LSE', currency='GBP', localSymbol='HSBA', tradingClass='SET1'), position=10.0, marketPrice=12.9005556, marketValue=129.01, averageCost=13.81023, unrealizedPNL=-9.1, realizedPNL=0.0, account='DUQ117408')
2026-02-24 21:13:47,177 [INFO] ib_insync.wrapper: updatePortfolio: PortfolioItem(contract=Stock(conId=140148322, symbol='VOD', right='0', primaryExchange='LSE', currency='GBP', localSymbol='VOD', tradingClass='SET1'), position=690.0, marketPrice=1.16195405, marketValue=801.75, averageCost=1.1878841, unrealizedPNL=-17.89, realizedPNL=0.0, account='DUQ117408')
2026-02-24 21:13:47,182 [INFO] ib_insync.wrapper: execDetails Execution(execId='0001b266.699d44b1.01.01', time=datetime.datetime(2026, 2, 24, 12, 27, 28, tzinfo=datetime.timezone.utc), acctNumber='DUQ117408', exchange='BATEUK', side='BOT', shares=3.0, price=1281.6, permId=1633852961, clientId=1, orderId=4, liquidation=0, cumQty=3.0, avgPrice=1281.6, orderRef='', evRule='', evMultiplier=0.0, modelCode='', lastLiquidity=2)
2026-02-24 21:13:47,183 [INFO] ib_insync.wrapper: execDetails Execution(execId='0001b266.699d45c8.01.01', time=datetime.datetime(2026, 2, 24, 13, 29, 16, tzinfo=datetime.timezone.utc), acctNumber='DUQ117408', exchange='BATEUK', side='BOT', shares=1.0, price=456.3, permId=1633852967, clientId=1, orderId=38, liquidation=0, cumQty=1.0, avgPrice=456.3, orderRef='', evRule='', evMultiplier=0.0, modelCode='', lastLiquidity=2)
2026-02-24 21:13:47,183 [INFO] ib_insync.wrapper: execDetails Execution(execId='0001b266.699d464b.01.01', time=datetime.datetime(2026, 2, 24, 14, 11, 45, tzinfo=datetime.timezone.utc), acctNumber='DUQ117408', exchange='BATEUK', side='BOT', shares=1.0, price=456.7, permId=793619604, clientId=1, orderId=72, liquidation=0, cumQty=1.0, avgPrice=456.7, orderRef='', evRule='', evMultiplier=0.0, modelCode='', lastLiquidity=2)
2026-02-24 21:13:47,184 [INFO] ib_insync.wrapper: execDetails Execution(execId='0001b266.699d4670.01.01', time=datetime.datetime(2026, 2, 24, 14, 16, 46, tzinfo=datetime.timezone.utc), acctNumber='DUQ117408', exchange='BATEUK', side='BOT', shares=153.0, price=117.6, permId=793619605, clientId=1, orderId=81, liquidation=0, cumQty=153.0, avgPrice=117.6, orderRef='', evRule='', evMultiplier=0.0, modelCode='', lastLiquidity=2)
2026-02-24 21:13:47,184 [INFO] ib_insync.wrapper: execDetails Execution(execId='0001b266.699d468f.01.01', time=datetime.datetime(2026, 2, 24, 14, 21, 49, tzinfo=datetime.timezone.utc), acctNumber='DUQ117408', exchange='BATEUK', side='BOT', shares=6.0, price=1284.8, permId=793619606, clientId=1, orderId=96, liquidation=0, cumQty=6.0, avgPrice=1284.8, orderRef='', evRule='', evMultiplier=0.0, modelCode='', lastLiquidity=2)
2026-02-24 21:13:47,184 [INFO] ib_insync.wrapper: execDetails Execution(execId='0001b266.699d481d.01.01', time=datetime.datetime(2026, 2, 24, 15, 2, 26, tzinfo=datetime.timezone.utc), acctNumber='DUQ117408', exchange='BATEUK', side='BOT', shares=1.0, price=1292.4, permId=793619627, clientId=1, orderId=151, liquidation=0, cumQty=1.0, avgPrice=1292.4, orderRef='', evRule='', evMultiplier=0.0, modelCode='', lastLiquidity=2)
2026-02-24 21:13:47,184 [INFO] ib_insync.wrapper: execDetails Execution(execId='0001b266.699d4820.01.01', time=datetime.datetime(2026, 2, 24, 15, 2, 57, tzinfo=datetime.timezone.utc), acctNumber='DUQ117408', exchange='BATEUK', side='BOT', shares=504.0, price=116.7, permId=793619628, clientId=1, orderId=158, liquidation=0, cumQty=504.0, avgPrice=116.7, orderRef='', evRule='', evMultiplier=0.0, modelCode='', lastLiquidity=2)
2026-02-24 21:13:47,185 [INFO] ib_insync.wrapper: execDetails Execution(execId='0001b266.699d492b.01.01', time=datetime.datetime(2026, 2, 24, 15, 35, 9, tzinfo=datetime.timezone.utc), acctNumber='DUQ117408', exchange='BATEUK', side='BOT', shares=33.0, price=116.7, permId=793619657, clientId=1, orderId=198, liquidation=0, cumQty=33.0, avgPrice=116.7, orderRef='', evRule='', evMultiplier=0.0, modelCode='', lastLiquidity=2)
2026-02-24 21:13:47,185 [INFO] ib_insync.wrapper: commissionReport: CommissionReport(execId='0001b266.699d44b1.01.01', commission=3.19224, currency='GBP', realizedPNL=0.0, yield_=0.0, yieldRedemptionDate=0)
2026-02-24 21:13:47,185 [INFO] ib_insync.wrapper: commissionReport: CommissionReport(execId='0001b266.699d45c8.01.01', commission=3.022815, currency='GBP', realizedPNL=0.0, yield_=0.0, yieldRedemptionDate=0)
2026-02-24 21:13:47,185 [INFO] ib_insync.wrapper: commissionReport: CommissionReport(execId='0001b266.699d464b.01.01', commission=3.022835, currency='GBP', realizedPNL=0.0, yield_=0.0, yieldRedemptionDate=0)
2026-02-24 21:13:47,185 [INFO] ib_insync.wrapper: commissionReport: CommissionReport(execId='0001b266.699d4670.01.01', commission=3.89964, currency='GBP', realizedPNL=0.0, yield_=0.0, yieldRedemptionDate=0)
2026-02-24 21:13:47,186 [INFO] ib_insync.wrapper: commissionReport: CommissionReport(execId='0001b266.699d468f.01.01', commission=3.38544, currency='GBP', realizedPNL=0.0, yield_=0.0, yieldRedemptionDate=0)
2026-02-24 21:13:47,186 [INFO] ib_insync.wrapper: commissionReport: CommissionReport(execId='0001b266.699d481d.01.01', commission=3.06462, currency='GBP', realizedPNL=0.0, yield_=0.0, yieldRedemptionDate=0)
2026-02-24 21:13:47,186 [INFO] ib_insync.wrapper: commissionReport: CommissionReport(execId='0001b266.699d4820.01.01', commission=5.94084, currency='GBP', realizedPNL=0.0, yield_=0.0, yieldRedemptionDate=0)
2026-02-24 21:13:47,186 [INFO] ib_insync.wrapper: commissionReport: CommissionReport(execId='0001b266.699d492b.01.01', commission=3.192555, currency='GBP', realizedPNL=0.0, yield_=0.0, yieldRedemptionDate=0)
2026-02-24 21:13:47,186 [INFO] ib_insync.ib: Synchronization complete
2026-02-24 21:13:47,187 [INFO] src.execution.ibkr_broker: Connected to IBKR at 127.0.0.1:7497 (clientId=1)
2026-02-24 21:13:47,187 [INFO] __main__: [OK] IBKR connection established
2026-02-24 21:13:47,187 [INFO] __main__: [OK] IBKR account detected: DUQ117408 (paper)
2026-02-24 21:13:47,187 [INFO] ib_insync.ib: Disconnecting from 127.0.0.1:7497, 119 B sent in 8 messages, 25.1 kB received in 436 messages, session time 124 ms.
2026-02-24 21:13:47,188 [INFO] ib_insync.client: Disconnecting
2026-02-24 21:13:47,188 [INFO] src.execution.ibkr_broker: Disconnected from IBKR
2026-02-24 21:13:47,188 [INFO] __main__: UK health check complete: no blocking errors
2026-02-24 21:13:47,694 [INFO] ib_insync.client: Disconnected.
2026-02-24 21:13:47,694 [INFO] ib_insync.client: Connecting to 127.0.0.1:7497 with clientId 1...
2026-02-24 21:13:47,695 [INFO] ib_insync.client: Connected
2026-02-24 21:13:47,698 [INFO] ib_insync.client: Logged on to server version 176
2026-02-24 21:13:47,699 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:hfarm
2026-02-24 21:13:47,699 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:eufarmnj
2026-02-24 21:13:47,700 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:cashfarm
2026-02-24 21:13:47,700 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:usfuture
2026-02-24 21:13:47,700 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:jfarm
2026-02-24 21:13:47,700 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:usfarm.nj
2026-02-24 21:13:47,700 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:eufarm
2026-02-24 21:13:47,700 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:usfarm
2026-02-24 21:13:47,701 [INFO] ib_insync.wrapper: Warning 2106, reqId -1: HMDS data farm connection is OK:euhmds
2026-02-24 21:13:47,701 [INFO] ib_insync.wrapper: Warning 2106, reqId -1: HMDS data farm connection is OK:fundfarm
2026-02-24 21:13:47,701 [INFO] ib_insync.wrapper: Warning 2106, reqId -1: HMDS data farm connection is OK:ushmds
2026-02-24 21:13:47,701 [INFO] ib_insync.wrapper: Warning 2158, reqId -1: Sec-def data farm connection is OK:secdefnj
2026-02-24 21:13:47,701 [INFO] ib_insync.client: API connection ready
2026-02-24 21:13:47,703 [INFO] ib_insync.wrapper: position: Position(account='DUQ117408', contract=Stock(conId=909083, symbol='HSBA', exchange='LSE', currency='GBP', localSymbol='HSBA', tradingClass='SET1'), position=10.0, avgCost=13.81023)
2026-02-24 21:13:47,703 [INFO] ib_insync.wrapper: position: Position(account='DUQ117408', contract=Stock(conId=908940, symbol='BARC', exchange='LSE', currency='GBP', localSymbol='BARC', tradingClass='SET1'), position=2.0, avgCost=7.587825)
2026-02-24 21:13:47,703 [INFO] ib_insync.wrapper: position: Position(account='DUQ117408', contract=Stock(conId=140148322, symbol='VOD', exchange='LSE', currency='GBP', localSymbol='VOD', tradingClass='SET1'), position=690.0, avgCost=1.1878841)
2026-02-24 21:13:47,805 [INFO] ib_insync.wrapper: updatePortfolio: PortfolioItem(contract=Stock(conId=908940, symbol='BARC', right='0', primaryExchange='LSE', currency='GBP', localSymbol='BARC', tradingClass='SET1'), position=2.0, marketPrice=4.59246875, marketValue=9.18, averageCost=7.587825, unrealizedPNL=-5.99, realizedPNL=0.0, account='DUQ117408')
2026-02-24 21:13:47,806 [INFO] ib_insync.wrapper: updatePortfolio: PortfolioItem(contract=Stock(conId=909083, symbol='HSBA', right='0', primaryExchange='LSE', currency='GBP', localSymbol='HSBA', tradingClass='SET1'), position=10.0, marketPrice=12.9005556, marketValue=129.01, averageCost=13.81023, unrealizedPNL=-9.1, realizedPNL=0.0, account='DUQ117408')
2026-02-24 21:13:47,806 [INFO] ib_insync.wrapper: updatePortfolio: PortfolioItem(contract=Stock(conId=140148322, symbol='VOD', right='0', primaryExchange='LSE', currency='GBP', localSymbol='VOD', tradingClass='SET1'), position=690.0, marketPrice=1.16195405, marketValue=801.75, averageCost=1.1878841, unrealizedPNL=-17.89, realizedPNL=0.0, account='DUQ117408')
2026-02-24 21:13:47,809 [INFO] ib_insync.wrapper: execDetails Execution(execId='0001b266.699d44b1.01.01', time=datetime.datetime(2026, 2, 24, 12, 27, 28, tzinfo=datetime.timezone.utc), acctNumber='DUQ117408', exchange='BATEUK', side='BOT', shares=3.0, price=1281.6, permId=1633852961, clientId=1, orderId=4, liquidation=0, cumQty=3.0, avgPrice=1281.6, orderRef='', evRule='', evMultiplier=0.0, modelCode='', lastLiquidity=2)
2026-02-24 21:13:47,809 [INFO] ib_insync.wrapper: execDetails Execution(execId='0001b266.699d45c8.01.01', time=datetime.datetime(2026, 2, 24, 13, 29, 16, tzinfo=datetime.timezone.utc), acctNumber='DUQ117408', exchange='BATEUK', side='BOT', shares=1.0, price=456.3, permId=1633852967, clientId=1, orderId=38, liquidation=0, cumQty=1.0, avgPrice=456.3, orderRef='', evRule='', evMultiplier=0.0, modelCode='', lastLiquidity=2)
2026-02-24 21:13:47,809 [INFO] ib_insync.wrapper: execDetails Execution(execId='0001b266.699d464b.01.01', time=datetime.datetime(2026, 2, 24, 14, 11, 45, tzinfo=datetime.timezone.utc), acctNumber='DUQ117408', exchange='BATEUK', side='BOT', shares=1.0, price=456.7, permId=793619604, clientId=1, orderId=72, liquidation=0, cumQty=1.0, avgPrice=456.7, orderRef='', evRule='', evMultiplier=0.0, modelCode='', lastLiquidity=2)
2026-02-24 21:13:47,810 [INFO] ib_insync.wrapper: execDetails Execution(execId='0001b266.699d4670.01.01', time=datetime.datetime(2026, 2, 24, 14, 16, 46, tzinfo=datetime.timezone.utc), acctNumber='DUQ117408', exchange='BATEUK', side='BOT', shares=153.0, price=117.6, permId=793619605, clientId=1, orderId=81, liquidation=0, cumQty=153.0, avgPrice=117.6, orderRef='', evRule='', evMultiplier=0.0, modelCode='', lastLiquidity=2)
2026-02-24 21:13:47,810 [INFO] ib_insync.wrapper: execDetails Execution(execId='0001b266.699d468f.01.01', time=datetime.datetime(2026, 2, 24, 14, 21, 49, tzinfo=datetime.timezone.utc), acctNumber='DUQ117408', exchange='BATEUK', side='BOT', shares=6.0, price=1284.8, permId=793619606, clientId=1, orderId=96, liquidation=0, cumQty=6.0, avgPrice=1284.8, orderRef='', evRule='', evMultiplier=0.0, modelCode='', lastLiquidity=2)
2026-02-24 21:13:47,810 [INFO] ib_insync.wrapper: execDetails Execution(execId='0001b266.699d481d.01.01', time=datetime.datetime(2026, 2, 24, 15, 2, 26, tzinfo=datetime.timezone.utc), acctNumber='DUQ117408', exchange='BATEUK', side='BOT', shares=1.0, price=1292.4, permId=793619627, clientId=1, orderId=151, liquidation=0, cumQty=1.0, avgPrice=1292.4, orderRef='', evRule='', evMultiplier=0.0, modelCode='', lastLiquidity=2)
2026-02-24 21:13:47,810 [INFO] ib_insync.wrapper: execDetails Execution(execId='0001b266.699d4820.01.01', time=datetime.datetime(2026, 2, 24, 15, 2, 57, tzinfo=datetime.timezone.utc), acctNumber='DUQ117408', exchange='BATEUK', side='BOT', shares=504.0, price=116.7, permId=793619628, clientId=1, orderId=158, liquidation=0, cumQty=504.0, avgPrice=116.7, orderRef='', evRule='', evMultiplier=0.0, modelCode='', lastLiquidity=2)
2026-02-24 21:13:47,811 [INFO] ib_insync.wrapper: execDetails Execution(execId='0001b266.699d492b.01.01', time=datetime.datetime(2026, 2, 24, 15, 35, 9, tzinfo=datetime.timezone.utc), acctNumber='DUQ117408', exchange='BATEUK', side='BOT', shares=33.0, price=116.7, permId=793619657, clientId=1, orderId=198, liquidation=0, cumQty=33.0, avgPrice=116.7, orderRef='', evRule='', evMultiplier=0.0, modelCode='', lastLiquidity=2)
2026-02-24 21:13:47,811 [INFO] ib_insync.wrapper: commissionReport: CommissionReport(execId='0001b266.699d44b1.01.01', commission=3.19224, currency='GBP', realizedPNL=0.0, yield_=0.0, yieldRedemptionDate=0)
2026-02-24 21:13:47,811 [INFO] ib_insync.wrapper: commissionReport: CommissionReport(execId='0001b266.699d45c8.01.01', commission=3.022815, currency='GBP', realizedPNL=0.0, yield_=0.0, yieldRedemptionDate=0)
2026-02-24 21:13:47,811 [INFO] ib_insync.wrapper: commissionReport: CommissionReport(execId='0001b266.699d464b.01.01', commission=3.022835, currency='GBP', realizedPNL=0.0, yield_=0.0, yieldRedemptionDate=0)
2026-02-24 21:13:47,812 [INFO] ib_insync.wrapper: commissionReport: CommissionReport(execId='0001b266.699d4670.01.01', commission=3.89964, currency='GBP', realizedPNL=0.0, yield_=0.0, yieldRedemptionDate=0)
2026-02-24 21:13:47,812 [INFO] ib_insync.wrapper: commissionReport: CommissionReport(execId='0001b266.699d468f.01.01', commission=3.38544, currency='GBP', realizedPNL=0.0, yield_=0.0, yieldRedemptionDate=0)
2026-02-24 21:13:47,812 [INFO] ib_insync.wrapper: commissionReport: CommissionReport(execId='0001b266.699d481d.01.01', commission=3.06462, currency='GBP', realizedPNL=0.0, yield_=0.0, yieldRedemptionDate=0)
2026-02-24 21:13:47,812 [INFO] ib_insync.wrapper: commissionReport: CommissionReport(execId='0001b266.699d4820.01.01', commission=5.94084, currency='GBP', realizedPNL=0.0, yield_=0.0, yieldRedemptionDate=0)
2026-02-24 21:13:47,813 [INFO] ib_insync.wrapper: commissionReport: CommissionReport(execId='0001b266.699d492b.01.01', commission=3.192555, currency='GBP', realizedPNL=0.0, yield_=0.0, yieldRedemptionDate=0)
2026-02-24 21:13:47,813 [INFO] ib_insync.ib: Synchronization complete
2026-02-24 21:13:47,813 [INFO] src.execution.ibkr_broker: Connected to IBKR at 127.0.0.1:7497 (clientId=1)
2026-02-24 21:13:47,813 [INFO] __main__: Starting timed paper trial for 180s
2026-02-24 21:13:47,824 [INFO] __main__: IBKR account detected: DUQ117408 (paper)
2026-02-24 21:13:47,826 [INFO] __main__: Runtime DB (paper): trading_paper.db
2026-02-24 21:13:47,832 [INFO] src.trading.loop: Pre-warming strategy with recent 5-day history…
C:\Users\rando\Projects\trading-bot\src\data\market_data_store.py:187: UserWarning: Converting to PeriodArray/Index representation will drop timezone information.
  for month, month_df in df.groupby(df.index.to_period("M")):
2026-02-24 21:13:49,963 [INFO] src.trading.loop:   HSBA.L: 1015 bars loaded (strategy ready: 1015 >= 16)
C:\Users\rando\Projects\trading-bot\src\data\market_data_store.py:187: UserWarning: Converting to PeriodArray/Index representation will drop timezone information.
  for month, month_df in df.groupby(df.index.to_period("M")):
2026-02-24 21:13:51,289 [INFO] src.trading.loop:   VOD.L: 973 bars loaded (strategy ready: 973 >= 16)
C:\Users\rando\Projects\trading-bot\src\data\market_data_store.py:187: UserWarning: Converting to PeriodArray/Index representation will drop timezone information.
  for month, month_df in df.groupby(df.index.to_period("M")):
2026-02-24 21:13:52,660 [INFO] src.trading.loop:   BP.L: 1015 bars loaded (strategy ready: 1015 >= 16)
C:\Users\rando\Projects\trading-bot\src\data\market_data_store.py:187: UserWarning: Converting to PeriodArray/Index representation will drop timezone information.
  for month, month_df in df.groupby(df.index.to_period("M")):
2026-02-24 21:13:54,079 [INFO] src.trading.loop:   BARC.L: 1016 bars loaded (strategy ready: 1016 >= 16)
C:\Users\rando\Projects\trading-bot\src\data\market_data_store.py:187: UserWarning: Converting to PeriodArray/Index representation will drop timezone information.
  for month, month_df in df.groupby(df.index.to_period("M")):
2026-02-24 21:13:55,457 [INFO] src.trading.loop:   SHEL.L: 1013 bars loaded (strategy ready: 1013 >= 16)
2026-02-24 21:13:55,458 [INFO] __main__: Paper trading started. Min bars required: 16. Polling every 300s. Ctrl+C to stop.
2026-02-24 21:13:55,563 [INFO] src.trading.loop: Initial portfolio value: $999,967.02
2026-02-24 21:13:55,564 [INFO] src.data.feeds: Stream started for ['HSBA.L', 'VOD.L', 'BP.L', 'BARC.L', 'SHEL.L'] (poll every 300s)
2026-02-24 21:13:55,676 [ERROR] ib_insync.wrapper: Error 200, reqId 42: No security definition has been found for the request, contract: Stock(symbol='HSBA', exchange='SMART', currency='USD')
2026-02-24 21:13:55,882 [ERROR] ib_insync.wrapper: Error 200, reqId 43: No security definition has been found for the request, contract: Stock(symbol='BARC', exchange='SMART', currency='USD')
2026-02-24 21:13:56,192 [INFO] src.trading.loop: Portfolio: $nan  cash=$999,027.08  positions=3  return=+nan%
2026-02-24 21:13:56,266 [ERROR] ib_insync.wrapper: Error 10089, reqId 44: Requested market data requires additional subscription for API. See link in 'Market Data Connections' dialog for more details.Delayed market data is available.VOD NASDAQ.NMS/TOP/ALL, contract: Stock(symbol='VOD', exchange='SMART', currency='USD')
2026-02-24 21:13:56,284 [ERROR] ib_insync.wrapper: Error 200, reqId 45: No security definition has been found for the request, contract: Stock(symbol='HSBA', exchange='SMART', currency='USD')
2026-02-24 21:13:56,497 [ERROR] ib_insync.wrapper: Error 200, reqId 46: No security definition has been found for the request, contract: Stock(symbol='BARC', exchange='SMART', currency='USD')
2026-02-24 21:13:56,702 [ERROR] ib_insync.wrapper: Error 10168, reqId 47: Requested market data is not subscribed. Delayed market data is not enabled., contract: Stock(symbol='VOD', exchange='SMART', currency='USD')
2026-02-24 21:13:56,812 [INFO] src.trading.loop: Portfolio: $nan  cash=$999,027.08  positions=3  return=+nan%
2026-02-24 21:13:56,904 [ERROR] ib_insync.wrapper: Error 200, reqId 48: No security definition has been found for the request, contract: Stock(symbol='HSBA', exchange='SMART', currency='USD')
2026-02-24 21:13:57,104 [ERROR] ib_insync.wrapper: Error 200, reqId 49: No security definition has been found for the request, contract: Stock(symbol='BARC', exchange='SMART', currency='USD')
2026-02-24 21:13:57,306 [ERROR] ib_insync.wrapper: Error 10168, reqId 50: Requested market data is not subscribed. Delayed market data is not enabled., contract: Stock(symbol='VOD', exchange='SMART', currency='USD')
2026-02-24 21:13:57,417 [INFO] src.trading.loop: Portfolio: $nan  cash=$999,027.08  positions=3  return=+nan%
2026-02-24 21:13:57,508 [ERROR] ib_insync.wrapper: Error 200, reqId 51: No security definition has been found for the request, contract: Stock(symbol='HSBA', exchange='SMART', currency='USD')
2026-02-24 21:13:57,708 [ERROR] ib_insync.wrapper: Error 200, reqId 52: No security definition has been found for the request, contract: Stock(symbol='BARC', exchange='SMART', currency='USD')
2026-02-24 21:13:57,926 [ERROR] ib_insync.wrapper: Error 10168, reqId 53: Requested market data is not subscribed. Delayed market data is not enabled., contract: Stock(symbol='VOD', exchange='SMART', currency='USD')
2026-02-24 21:13:58,052 [INFO] src.trading.loop: Portfolio: $nan  cash=$999,027.08  positions=3  return=+nan%
2026-02-24 21:13:58,145 [ERROR] ib_insync.wrapper: Error 200, reqId 54: No security definition has been found for the request, contract: Stock(symbol='HSBA', exchange='SMART', currency='USD')
2026-02-24 21:13:58,356 [ERROR] ib_insync.wrapper: Error 200, reqId 55: No security definition has been found for the request, contract: Stock(symbol='BARC', exchange='SMART', currency='USD')
2026-02-24 21:13:58,562 [ERROR] ib_insync.wrapper: Error 10168, reqId 56: Requested market data is not subscribed. Delayed market data is not enabled., contract: Stock(symbol='VOD', exchange='SMART', currency='USD')
2026-02-24 21:13:58,672 [INFO] src.trading.loop: Portfolio: $nan  cash=$999,027.08  positions=3  return=+nan%
2026-02-24 21:16:47,829 [INFO] ib_insync.ib: Disconnecting from 127.0.0.1:7497, 1.47 kB sent in 24 messages, 38.3 kB received in 729 messages, session time 180 s.
2026-02-24 21:16:47,829 [INFO] ib_insync.client: Disconnecting
2026-02-24 21:16:47,829 [INFO] src.execution.ibkr_broker: Disconnected from IBKR
2026-02-24 21:16:47,829 [INFO] ib_insync.client: Disconnected.
2026-02-24 21:16:47,830 [INFO] __main__: Paper trial duration reached (180s); stopping session
2026-02-24 21:16:47,832 [INFO] __main__: Paper session summary export completed
2026-02-24 21:16:47,832 [INFO] __main__:   json: reports\uk_tax\paper_session_summary.json
2026-02-24 21:16:47,833 [INFO] __main__:   csv: reports\uk_tax\paper_session_summary.csv
2026-02-24 21:16:47,833 [INFO] __main__:   fills=0/8 fill_rate=0.00% win_rate=0.00% pnl_gbp=0.00
