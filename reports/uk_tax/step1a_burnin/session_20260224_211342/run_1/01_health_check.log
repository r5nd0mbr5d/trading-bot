2026-02-24 21:13:44,967 [INFO] __main__: [OK] Broker provider is IBKR
2026-02-24 21:13:44,968 [INFO] __main__: [OK] Market timezone is Europe/London
2026-02-24 21:13:44,971 [INFO] __main__: [OK] Base currency is GBP
2026-02-24 21:13:44,972 [INFO] __main__: [OK] Detected UK symbols: HSBA.L, VOD.L, BP.L, BARC.L, SHEL.L
2026-02-24 21:13:44,973 [INFO] __main__: [OK] DB isolation paths set (paper=trading_paper.db, live=trading_live.db, test=trading_test.db)
2026-02-24 21:13:45,011 [INFO] ib_insync.client: Connecting to 127.0.0.1:7497 with clientId 1...
2026-02-24 21:13:45,012 [INFO] ib_insync.client: Connected
2026-02-24 21:13:45,016 [INFO] ib_insync.client: Logged on to server version 176
2026-02-24 21:13:45,017 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:hfarm
2026-02-24 21:13:45,017 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:eufarmnj
2026-02-24 21:13:45,017 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:cashfarm
2026-02-24 21:13:45,017 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:usfuture
2026-02-24 21:13:45,018 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:jfarm
2026-02-24 21:13:45,018 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:usfarm.nj
2026-02-24 21:13:45,018 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:eufarm
2026-02-24 21:13:45,018 [INFO] ib_insync.wrapper: Warning 2104, reqId -1: Market data farm connection is OK:usfarm
2026-02-24 21:13:45,018 [INFO] ib_insync.wrapper: Warning 2106, reqId -1: HMDS data farm connection is OK:euhmds
2026-02-24 21:13:45,019 [INFO] ib_insync.wrapper: Warning 2106, reqId -1: HMDS data farm connection is OK:fundfarm
2026-02-24 21:13:45,019 [INFO] ib_insync.wrapper: Warning 2106, reqId -1: HMDS data farm connection is OK:ushmds
2026-02-24 21:13:45,019 [INFO] ib_insync.wrapper: Warning 2158, reqId -1: Sec-def data farm connection is OK:secdefnj
2026-02-24 21:13:45,019 [INFO] ib_insync.client: API connection ready
2026-02-24 21:13:45,021 [INFO] ib_insync.wrapper: position: Position(account='DUQ117408', contract=Stock(conId=909083, symbol='HSBA', exchange='LSE', currency='GBP', localSymbol='HSBA', tradingClass='SET1'), position=10.0, avgCost=13.81023)
2026-02-24 21:13:45,021 [INFO] ib_insync.wrapper: position: Position(account='DUQ117408', contract=Stock(conId=908940, symbol='BARC', exchange='LSE', currency='GBP', localSymbol='BARC', tradingClass='SET1'), position=2.0, avgCost=7.587825)
2026-02-24 21:13:45,022 [INFO] ib_insync.wrapper: position: Position(account='DUQ117408', contract=Stock(conId=140148322, symbol='VOD', exchange='LSE', currency='GBP', localSymbol='VOD', tradingClass='SET1'), position=690.0, avgCost=1.1878841)
2026-02-24 21:13:45,123 [INFO] ib_insync.wrapper: updatePortfolio: PortfolioItem(contract=Stock(conId=908940, symbol='BARC', right='0', primaryExchange='LSE', currency='GBP', localSymbol='BARC', tradingClass='SET1'), position=2.0, marketPrice=4.59246875, marketValue=9.18, averageCost=7.587825, unrealizedPNL=-5.99, realizedPNL=0.0, account='DUQ117408')
2026-02-24 21:13:45,124 [INFO] ib_insync.wrapper: updatePortfolio: PortfolioItem(contract=Stock(conId=909083, symbol='HSBA', right='0', primaryExchange='LSE', currency='GBP', localSymbol='HSBA', tradingClass='SET1'), position=10.0, marketPrice=12.9005556, marketValue=129.01, averageCost=13.81023, unrealizedPNL=-9.1, realizedPNL=0.0, account='DUQ117408')
2026-02-24 21:13:45,124 [INFO] ib_insync.wrapper: updatePortfolio: PortfolioItem(contract=Stock(conId=140148322, symbol='VOD', right='0', primaryExchange='LSE', currency='GBP', localSymbol='VOD', tradingClass='SET1'), position=690.0, marketPrice=1.16195405, marketValue=801.75, averageCost=1.1878841, unrealizedPNL=-17.89, realizedPNL=0.0, account='DUQ117408')
2026-02-24 21:13:45,129 [INFO] ib_insync.wrapper: execDetails Execution(execId='0001b266.699d44b1.01.01', time=datetime.datetime(2026, 2, 24, 12, 27, 28, tzinfo=datetime.timezone.utc), acctNumber='DUQ117408', exchange='BATEUK', side='BOT', shares=3.0, price=1281.6, permId=1633852961, clientId=1, orderId=4, liquidation=0, cumQty=3.0, avgPrice=1281.6, orderRef='', evRule='', evMultiplier=0.0, modelCode='', lastLiquidity=2)
2026-02-24 21:13:45,129 [INFO] ib_insync.wrapper: execDetails Execution(execId='0001b266.699d45c8.01.01', time=datetime.datetime(2026, 2, 24, 13, 29, 16, tzinfo=datetime.timezone.utc), acctNumber='DUQ117408', exchange='BATEUK', side='BOT', shares=1.0, price=456.3, permId=1633852967, clientId=1, orderId=38, liquidation=0, cumQty=1.0, avgPrice=456.3, orderRef='', evRule='', evMultiplier=0.0, modelCode='', lastLiquidity=2)
2026-02-24 21:13:45,129 [INFO] ib_insync.wrapper: execDetails Execution(execId='0001b266.699d464b.01.01', time=datetime.datetime(2026, 2, 24, 14, 11, 45, tzinfo=datetime.timezone.utc), acctNumber='DUQ117408', exchange='BATEUK', side='BOT', shares=1.0, price=456.7, permId=793619604, clientId=1, orderId=72, liquidation=0, cumQty=1.0, avgPrice=456.7, orderRef='', evRule='', evMultiplier=0.0, modelCode='', lastLiquidity=2)
2026-02-24 21:13:45,130 [INFO] ib_insync.wrapper: execDetails Execution(execId='0001b266.699d4670.01.01', time=datetime.datetime(2026, 2, 24, 14, 16, 46, tzinfo=datetime.timezone.utc), acctNumber='DUQ117408', exchange='BATEUK', side='BOT', shares=153.0, price=117.6, permId=793619605, clientId=1, orderId=81, liquidation=0, cumQty=153.0, avgPrice=117.6, orderRef='', evRule='', evMultiplier=0.0, modelCode='', lastLiquidity=2)
2026-02-24 21:13:45,130 [INFO] ib_insync.wrapper: execDetails Execution(execId='0001b266.699d468f.01.01', time=datetime.datetime(2026, 2, 24, 14, 21, 49, tzinfo=datetime.timezone.utc), acctNumber='DUQ117408', exchange='BATEUK', side='BOT', shares=6.0, price=1284.8, permId=793619606, clientId=1, orderId=96, liquidation=0, cumQty=6.0, avgPrice=1284.8, orderRef='', evRule='', evMultiplier=0.0, modelCode='', lastLiquidity=2)
2026-02-24 21:13:45,130 [INFO] ib_insync.wrapper: execDetails Execution(execId='0001b266.699d481d.01.01', time=datetime.datetime(2026, 2, 24, 15, 2, 26, tzinfo=datetime.timezone.utc), acctNumber='DUQ117408', exchange='BATEUK', side='BOT', shares=1.0, price=1292.4, permId=793619627, clientId=1, orderId=151, liquidation=0, cumQty=1.0, avgPrice=1292.4, orderRef='', evRule='', evMultiplier=0.0, modelCode='', lastLiquidity=2)
2026-02-24 21:13:45,130 [INFO] ib_insync.wrapper: execDetails Execution(execId='0001b266.699d4820.01.01', time=datetime.datetime(2026, 2, 24, 15, 2, 57, tzinfo=datetime.timezone.utc), acctNumber='DUQ117408', exchange='BATEUK', side='BOT', shares=504.0, price=116.7, permId=793619628, clientId=1, orderId=158, liquidation=0, cumQty=504.0, avgPrice=116.7, orderRef='', evRule='', evMultiplier=0.0, modelCode='', lastLiquidity=2)
2026-02-24 21:13:45,131 [INFO] ib_insync.wrapper: execDetails Execution(execId='0001b266.699d492b.01.01', time=datetime.datetime(2026, 2, 24, 15, 35, 9, tzinfo=datetime.timezone.utc), acctNumber='DUQ117408', exchange='BATEUK', side='BOT', shares=33.0, price=116.7, permId=793619657, clientId=1, orderId=198, liquidation=0, cumQty=33.0, avgPrice=116.7, orderRef='', evRule='', evMultiplier=0.0, modelCode='', lastLiquidity=2)
2026-02-24 21:13:45,131 [INFO] ib_insync.wrapper: commissionReport: CommissionReport(execId='0001b266.699d44b1.01.01', commission=3.19224, currency='GBP', realizedPNL=0.0, yield_=0.0, yieldRedemptionDate=0)
2026-02-24 21:13:45,131 [INFO] ib_insync.wrapper: commissionReport: CommissionReport(execId='0001b266.699d45c8.01.01', commission=3.022815, currency='GBP', realizedPNL=0.0, yield_=0.0, yieldRedemptionDate=0)
2026-02-24 21:13:45,131 [INFO] ib_insync.wrapper: commissionReport: CommissionReport(execId='0001b266.699d464b.01.01', commission=3.022835, currency='GBP', realizedPNL=0.0, yield_=0.0, yieldRedemptionDate=0)
2026-02-24 21:13:45,131 [INFO] ib_insync.wrapper: commissionReport: CommissionReport(execId='0001b266.699d4670.01.01', commission=3.89964, currency='GBP', realizedPNL=0.0, yield_=0.0, yieldRedemptionDate=0)
2026-02-24 21:13:45,131 [INFO] ib_insync.wrapper: commissionReport: CommissionReport(execId='0001b266.699d468f.01.01', commission=3.38544, currency='GBP', realizedPNL=0.0, yield_=0.0, yieldRedemptionDate=0)
2026-02-24 21:13:45,132 [INFO] ib_insync.wrapper: commissionReport: CommissionReport(execId='0001b266.699d481d.01.01', commission=3.06462, currency='GBP', realizedPNL=0.0, yield_=0.0, yieldRedemptionDate=0)
2026-02-24 21:13:45,132 [INFO] ib_insync.wrapper: commissionReport: CommissionReport(execId='0001b266.699d4820.01.01', commission=5.94084, currency='GBP', realizedPNL=0.0, yield_=0.0, yieldRedemptionDate=0)
2026-02-24 21:13:45,132 [INFO] ib_insync.wrapper: commissionReport: CommissionReport(execId='0001b266.699d492b.01.01', commission=3.192555, currency='GBP', realizedPNL=0.0, yield_=0.0, yieldRedemptionDate=0)
2026-02-24 21:13:45,132 [INFO] ib_insync.ib: Synchronization complete
2026-02-24 21:13:45,133 [INFO] src.execution.ibkr_broker: Connected to IBKR at 127.0.0.1:7497 (clientId=1)
2026-02-24 21:13:45,133 [INFO] __main__: [OK] IBKR connection established
2026-02-24 21:13:45,133 [INFO] __main__: [OK] IBKR account detected: DUQ117408 (paper)
2026-02-24 21:13:45,133 [INFO] ib_insync.ib: Disconnecting from 127.0.0.1:7497, 119 B sent in 8 messages, 25.1 kB received in 436 messages, session time 122 ms.
2026-02-24 21:13:45,133 [INFO] ib_insync.client: Disconnecting
2026-02-24 21:13:45,134 [INFO] src.execution.ibkr_broker: Disconnected from IBKR
2026-02-24 21:13:45,134 [INFO] __main__: UK health check complete: no blocking errors
